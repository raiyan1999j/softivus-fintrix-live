function toggleSubmenu(e){document.getElementById(e).classList.toggle("open")}function toggleMobileSidebar(){document.getElementById("sidebar").classList.toggle("mobile-open")}function toggleDropdown(e){document.getElementById(e).classList.toggle("open")}document.addEventListener("click",e=>{e.target.closest(".filter-dropdown")||e.target.closest(".filter-dropdown-activecard")||(document.querySelectorAll(".dropdown-menu").forEach(e=>{e.classList.remove("open")}),document.querySelectorAll(".dropdown-menu-activecard").forEach(e=>{e.classList.remove("open")}))});const cardsData=[{id:"CARD-001",cardNumber:"•••• 4829",fullNumber:"4532 7856 9034 4829",cardholder:"John Anderson",type:"physical",status:"active",limit:5e3,spent:1258,expiry:"12/26",cvv:"749",icon:"credit-card",gradient:"gradient-black"},{id:"CARD-002",cardNumber:"•••• 7851",fullNumber:"5412 8963 4521 7851",cardholder:"John Anderson",type:"virtual",status:"active",limit:3e3,spent:892,expiry:"08/27",cvv:"321",icon:"smartphone",gradient:"gradient-primary"},{id:"CARD-003",cardNumber:"•••• 3142",fullNumber:"4916 2351 7894 3142",cardholder:"Sarah Johnson",type:"physical",status:"active",limit:1e4,spent:4567,expiry:"03/26",cvv:"582",icon:"credit-card",gradient:"gradient-black"},{id:"CARD-004",cardNumber:"•••• 9876",fullNumber:"5234 1234 5678 9876",cardholder:"John Anderson",type:"virtual",status:"frozen",limit:2e3,spent:156,expiry:"11/26",cvv:"234",icon:"smartphone",gradient:"gradient-cyan"},{id:"CARD-005",cardNumber:"•••• 5543",fullNumber:"4532 9876 1234 5543",cardholder:"Michael Brown",type:"physical",status:"active",limit:7500,spent:3421,expiry:"05/27",cvv:"891",icon:"credit-card",gradient:"gradient-black"},{id:"CARD-006",cardNumber:"•••• 7123",fullNumber:"5167 3456 7890 7123",cardholder:"Emily Davis",type:"virtual",status:"active",limit:4e3,spent:1789,expiry:"09/26",cvv:"456",icon:"smartphone",gradient:"gradient-purple"},{id:"CARD-007",cardNumber:"•••• 2847",fullNumber:"4716 5432 1098 2847",cardholder:"David Wilson",type:"physical",status:"cancelled",limit:5e3,spent:5e3,expiry:"02/25",cvv:"123",icon:"credit-card",gradient:"gradient-black"},{id:"CARD-008",cardNumber:"•••• 4512",fullNumber:"5423 8765 4321 4512",cardholder:"John Anderson",type:"virtual",status:"active",limit:6e3,spent:2134,expiry:"07/27",cvv:"678",icon:"smartphone",gradient:"gradient-orange"},{id:"CARD-009",cardNumber:"•••• 9034",fullNumber:"4539 1234 8765 9034",cardholder:"Jessica Martinez",type:"physical",status:"active",limit:8e3,spent:5432,expiry:"01/27",cvv:"234",icon:"credit-card",gradient:"gradient-black"},{id:"CARD-010",cardNumber:"•••• 6789",fullNumber:"5198 7654 3210 6789",cardholder:"Robert Taylor",type:"virtual",status:"frozen",limit:3500,spent:678,expiry:"10/26",cvv:"567",icon:"smartphone",gradient:"gradient-success"},{id:"CARD-011",cardNumber:"•••• 1234",fullNumber:"4916 8765 4321 1234",cardholder:"Amanda White",type:"physical",status:"active",limit:12e3,spent:8765,expiry:"06/27",cvv:"890",icon:"credit-card",gradient:"gradient-black"},{id:"CARD-012",cardNumber:"•••• 5678",fullNumber:"5234 5432 1098 5678",cardholder:"John Anderson",type:"virtual",status:"active",limit:4500,spent:2345,expiry:"04/27",cvv:"345",icon:"smartphone",gradient:"gradient-warning"}];let currentTab="all",searchQuery="",currentFilters={type:["physical","virtual"],status:["active","frozen","cancelled"],limit:["under-5k","5k-10k","over-10k"]};function renderCards(){const e=document.getElementById("cards-container");let t=cardsData.filter(e=>{if(!currentFilters.type.includes(e.type))return!1;if(!currentFilters.status.includes(e.status))return!1;let t=!1;if(currentFilters.limit.includes("under-5k")&&e.limit<5e3&&(t=!0),currentFilters.limit.includes("5k-10k")&&e.limit>=5e3&&e.limit<=1e4&&(t=!0),currentFilters.limit.includes("over-10k")&&e.limit>1e4&&(t=!0),!t)return!1;if(searchQuery){const t=searchQuery.toLowerCase();return e.cardNumber.toLowerCase().includes(t)||e.cardholder.toLowerCase().includes(t)||e.id.toLowerCase().includes(t)}return!0});"active"===currentTab?t=t.filter(e=>"active"===e.status):"frozen"===currentTab?t=t.filter(e=>"frozen"===e.status):"cancelled"===currentTab&&(t=t.filter(e=>"cancelled"===e.status));const n=t.map(e=>{const t="active"===e.status?"badge-success":"frozen"===e.status?"badge-warning":"badge-danger",n=e.limit-e.spent,a=(e.spent/e.limit*100).toFixed(1);return`\n                    <tr class="border-b border-border hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors">\n                        <td class="py-4 px-4 whitespace-nowrap align-middle text-sm text-text">\n                            <div class="flex items-center gap-3">\n                                <div class="w-12 h-12 ${e.gradient} rounded-xl flex items-center justify-center shrink-0">\n                                    <i data-lucide="${e.icon}" class="w-6 h-6 text-white"></i>\n                                </div>\n                                <div class="flex-1 min-w-0">\n                                    <div class="flex items-center gap-2 mb-1">\n                                        <p class="font-semibold text-text">${e.cardholder}</p>\n                                        <span class="badge-modern ${t}">${e.status}</span>\n                                    </div>\n                                    <p class="text-xs text-muted">${e.cardNumber} • ${e.id}</p>\n                                </div>\n                            </div>\n                        </td>\n                        <td class="py-4 px-4 whitespace-nowrap align-middle text-sm text-text">\n                            <span class="capitalize font-medium text-text">${e.type}</span>\n                        </td>\n                        <td class="py-4 px-4 whitespace-nowrap align-middle text-sm text-text">\n                            <span class="font-medium text-text">${e.expiry}</span>\n                        </td>\n                        <td class="py-4 px-4 whitespace-nowrap align-middle text-sm text-text">\n                            <span class="font-semibold text-text">$${e.limit.toLocaleString()}</span>\n                        </td>\n                        <td class="py-4 px-4 whitespace-nowrap align-middle text-sm text-text">\n                            <span class="font-semibold text-danger">$${e.spent.toLocaleString()}</span>\n                        </td>\n                        <td class="py-4 px-4 whitespace-nowrap align-middle text-sm text-text">\n                            <span class="font-semibold text-success">$${n.toLocaleString()}</span>\n                        </td>\n                        <td class="py-4 px-4 whitespace-nowrap align-middle text-sm text-text">\n                            <div class="flex items-center gap-2">\n                                <div class="flex-1 h-2 bg-bg rounded-full overflow-hidden max-w-[80px]">\n                                    <div class="h-full ${a>80?"bg-danger":a>50?"bg-warning":"bg-success"}" style="width: ${a}%"></div>\n                                </div>\n                                <span class="text-sm font-semibold text-text">${a}%</span>\n                            </div>\n                        </td>\n                        <td class="py-4 px-4 whitespace-nowrap align-middle text-sm text-text text-right">\n                            <div class="flex items-center gap-2 justify-end">\n                                ${"active"===e.status?'\n                                    <button class="btn-icon btn-icon-sm" onclick="openModal(\'freeze-card-modal\')" title="Freeze Card">\n                                        <i data-lucide="snowflake" class="w-4 h-4"></i>\n                                    </button>\n                                ':""}\n                                ${"frozen"===e.status?`\n                                    <button class="btn-icon btn-icon-sm" onclick="unfreezeCard('${e.id}')" title="Unfreeze Card">\n                                        <i data-lucide="unlock" class="w-4 h-4"></i>\n                                    </button>\n                                `:""}\n                                <button class="btn-icon btn-icon-sm" onclick="openModal('set-limit-modal')" title="Set Limit">\n                                    <i data-lucide="dollar-sign" class="w-4 h-4"></i>\n                                </button>\n                                <button class="btn-icon btn-icon-sm" onclick="openModal('card-details-modal')" title="View Details">\n                                    <i data-lucide="eye" class="w-4 h-4"></i>\n                                </button>\n\n                                \x3c!-- Three-dot menu for mobile --\x3e\n                                <div class="action-menu">\n                                    <button class="btn-icon btn-icon-sm action-menu-btn" onclick="toggleActionMenu(event, '${e.id}')" title="More Options">\n                                        <i data-lucide="more-vertical" class="w-4 h-4"></i>\n                                    </button>\n                                    <div class="action-menu-content" id="action-menu-${e.id}">\n                                        ${"active"===e.status?'\n                                            <button class="action-menu-item" onclick="openModal(\'freeze-card-modal\'); closeAllActionMenus();">\n                                                <i data-lucide="snowflake" class="w-4 h-4"></i>\n                                                Freeze Card\n                                            </button>\n                                        ':""}\n                                        ${"frozen"===e.status?`\n                                            <button class="action-menu-item" onclick="unfreezeCard('${e.id}'); closeAllActionMenus();">\n                                                <i data-lucide="unlock" class="w-4 h-4"></i>\n                                                Unfreeze Card\n                                            </button>\n                                        `:""}\n                                        <button class="action-menu-item" onclick="openModal('set-limit-modal'); closeAllActionMenus();">\n                                            <i data-lucide="dollar-sign" class="w-4 h-4"></i>\n                                            Set Limit\n                                        </button>\n                                        <button class="action-menu-item" onclick="openModal('card-details-modal'); closeAllActionMenus();">\n                                            <i data-lucide="eye" class="w-4 h-4"></i>\n                                            View Details\n                                        </button>\n                                        ${"virtual"===e.type?'\n                                            <button class="action-menu-item danger" onclick="openModal(\'delete-card-modal\'); closeAllActionMenus();">\n                                                <i data-lucide="trash-2" class="w-4 h-4"></i>\n                                                Delete Card\n                                            </button>\n                                        ':""}\n                                    </div>\n                                </div>\n                            </div>\n                        </td>\n                    </tr>\n                `}).join("");e.innerHTML=`\n                <div class="overflow-x-auto overflow-y-hidden">\n                    <table class="min-w-full">\n                        <thead>\n                            <tr class="border-b border-border">\n                                <th class="text-left py-4 px-4 font-semibold whitespace-nowrap text-muted">Card Details</th>\n                                <th class="text-left py-4 px-4 font-semibold whitespace-nowrap text-muted">Type</th>\n                                <th class="text-left py-4 px-4 font-semibold whitespace-nowrap text-muted">Expiry</th>\n                                <th class="text-left py-4 px-4 font-semibold whitespace-nowrap text-muted">Limit</th>\n                                <th class="text-left py-4 px-4 font-semibold whitespace-nowrap text-muted">Spent</th>\n                                <th class="text-left py-4 px-4 font-semibold whitespace-nowrap text-muted">Available</th>\n                                <th class="text-left py-4 px-4 font-semibold whitespace-nowrap text-muted">Usage</th>\n                                <th class="text-right py-4 px-4 font-semibold whitespace-nowrap text-muted">Actions</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            ${n}\n                        </tbody>\n                    </table>\n                </div>\n            `,document.getElementById("showing-count").textContent=t.length,document.getElementById("total-count").textContent=cardsData.length,lucide.createIcons()}function switchTabActivecard(e){currentTab=e,document.querySelectorAll(".tab-btn-activecard[data-tab]").forEach(e=>e.classList.remove("active"));const t=document.querySelector(`.tab-btn-activecard[data-tab="${e}"]`);t&&t.classList.add("active"),updateMobileDropdownActivecard(e),renderCards()}document.querySelectorAll(".tab-btn-activecard[data-tab]").forEach(e=>{e.addEventListener("click",()=>{switchTabActivecard(e.dataset.tab)})});const tabDropdownBtnActivecard=document.getElementById("tab-dropdown-btn-activecard"),tabDropdownMobileActivecard=document.getElementById("tab-dropdown-mobile-activecard");if(tabDropdownBtnActivecard&&tabDropdownMobileActivecard){tabDropdownBtnActivecard.addEventListener("click",e=>{e.stopPropagation(),tabDropdownMobileActivecard.classList.toggle("open")}),document.addEventListener("click",e=>{tabDropdownMobileActivecard.contains(e.target)||tabDropdownMobileActivecard.classList.remove("open")});const e=document.querySelectorAll(".tab-dropdown-item-activecard[data-tab]");e.forEach(t=>{t.addEventListener("click",n=>{n.stopPropagation();const a=t.dataset.tab;e.forEach(e=>e.classList.remove("active")),t.classList.add("active");const s=document.getElementById("tab-dropdown-text-activecard");s&&(s.textContent=t.textContent.trim()),tabDropdownMobileActivecard.classList.remove("open"),switchTabActivecard(a),lucide.createIcons()})})}function updateMobileDropdownActivecard(e){const t=document.getElementById("tab-dropdown-text-activecard");document.querySelectorAll(".tab-dropdown-item-activecard[data-tab]").forEach(n=>{n.dataset.tab===e?(n.classList.add("active"),t&&(t.textContent=n.textContent.trim())):n.classList.remove("active")})}function openModal(e){document.getElementById(e).classList.add("open"),document.body.style.overflow="hidden"}function closeModal(e){document.getElementById(e).classList.remove("open"),document.body.style.overflow=""}function requestCard(){closeModal("request-card-modal"),showToast("Card Requested","Your card request is being processed","success")}function freezeCard(){closeModal("freeze-card-modal"),showToast("Card Frozen","Card has been frozen successfully","success")}function unfreezeCard(e){showToast("Card Unfrozen","Card has been unfrozen successfully","success")}function deleteCard(){closeModal("delete-card-modal"),showToast("Card Deleted","Virtual card has been deleted","success")}function setLimit(){closeModal("set-limit-modal"),showToast("Limit Updated","Spending limit has been updated","success")}function showToast(e,t,n="success"){const a=document.getElementById("toast"),s=document.getElementById("toast-title"),c=document.getElementById("toast-message");s.textContent=e,c.textContent=t,a.className=`toast ${n}`,a.classList.add("show"),setTimeout(()=>a.classList.remove("show"),3e3)}function initCustomDropdowns(){const e=document.querySelectorAll(".custom-dropdown");e.forEach(t=>{const n=t.querySelector(".custom-dropdown-btn"),a=t.querySelectorAll(".custom-dropdown-item"),s=t.querySelector(".custom-dropdown-btn span"),c=t.querySelector('input[type="hidden"]');n&&(n.addEventListener("click",n=>{n.stopPropagation(),e.forEach(e=>{e!==t&&e.classList.remove("open")}),t.classList.toggle("open")}),a.forEach(e=>{e.addEventListener("click",n=>{n.stopPropagation();const i=e.dataset.value,o=e.textContent.trim();a.forEach(e=>e.classList.remove("active")),e.classList.add("active"),s&&(s.textContent=o),c&&(c.value=i),t.classList.remove("open"),lucide.createIcons()})}))}),document.addEventListener("click",t=>{t.target.closest(".custom-dropdown")||e.forEach(e=>e.classList.remove("open"))})}function toggleActionMenu(e,t){e.stopPropagation();const n=document.getElementById(`action-menu-${t}`),a=n.parentElement,s=e.currentTarget,c=a.classList.contains("open");if(closeAllActionMenus(),!c){a.classList.add("open");const e=s.getBoundingClientRect();n.style.position="fixed",n.style.top=e.bottom+5+"px",n.style.right=window.innerWidth-e.right+"px",n.style.left="auto",n.style.zIndex="1000",n.style.width="max-content"}lucide.createIcons()}function closeAllActionMenus(){document.querySelectorAll(".action-menu.open").forEach(e=>{e.classList.remove("open");const t=e.querySelector(".action-menu-content");t&&(t.style.position="",t.style.top="",t.style.right="",t.style.left="",t.style.zIndex="",t.style.width="")})}document.getElementById("card-search")&&document.getElementById("card-search").addEventListener("input",e=>{searchQuery=e.target.value,renderCards()}),document.querySelectorAll(".filter-checkbox").forEach(e=>{e.addEventListener("change",e=>{const t=e.target.dataset.filter;e.target.checked?["physical","virtual"].includes(t)?currentFilters.type.includes(t)||currentFilters.type.push(t):["active","frozen","cancelled"].includes(t)?currentFilters.status.includes(t)||currentFilters.status.push(t):["under-5k","5k-10k","over-10k"].includes(t)&&(currentFilters.limit.includes(t)||currentFilters.limit.push(t)):["physical","virtual"].includes(t)?currentFilters.type=currentFilters.type.filter(e=>e!==t):["active","frozen","cancelled"].includes(t)?currentFilters.status=currentFilters.status.filter(e=>e!==t):["under-5k","5k-10k","over-10k"].includes(t)&&(currentFilters.limit=currentFilters.limit.filter(e=>e!==t)),renderCards()})}),document.querySelectorAll(".modal").forEach(e=>{e.addEventListener("click",t=>{t.target===e&&(e.classList.remove("open"),document.body.style.overflow="")})}),document.addEventListener("click",e=>{e.target.closest(".action-menu")||closeAllActionMenus()}),document.addEventListener("scroll",()=>{closeAllActionMenus()},!0),document.addEventListener("DOMContentLoaded",()=>{renderCards(),initCustomDropdowns(),lucide.createIcons()});