const sidebar=document.getElementById("sidebar"),mainContent=document.getElementById("main-content"),sidebarToggle=document.getElementById("sidebar-toggle");function toggleSubmenu(e){const t=document.getElementById(e),a=document.getElementById(e.replace("-sub","-icon"));t.classList.toggle("open"),a&&(a.style.transform=t.classList.contains("open")?"rotate(180deg)":"rotate(0deg)")}sidebarToggle&&sidebarToggle.addEventListener("click",()=>{window.innerWidth<=768?sidebar.classList.toggle("mobile-open"):(sidebar.classList.toggle("collapsed"),mainContent.classList.toggle("expanded"))});const customersData=[{id:"CUST-001",firstName:"John",lastName:"Doe",name:"John Doe",email:"john.doe@example.com",phone:"+1 (555) 123-4567",type:"vip",status:"active",verification:"verified",totalSpent:45230,transactions:127,joinedDate:"2024-01-15",lastActivity:"2 hours ago",country:"United States",avatar:"assets/images/person1.jpg",gradient:"gradient-primary"},{id:"CUST-002",firstName:"Sarah",lastName:"Johnson",name:"Sarah Johnson",email:"sarah.j@company.com",phone:"+1 (555) 234-5678",type:"business",status:"active",verification:"verified",totalSpent:78540,transactions:245,joinedDate:"2023-11-22",lastActivity:"1 day ago",country:"United Kingdom",avatar:"assets/images/person2.jpg",gradient:"gradient-success"},{id:"CUST-003",firstName:"Michael",lastName:"Chen",name:"Michael Chen",email:"mchen@email.com",phone:"+1 (555) 345-6789",type:"individual",status:"active",verification:"verified",totalSpent:12890,transactions:45,joinedDate:"2024-03-10",lastActivity:"3 hours ago",country:"Canada",avatar:"assets/images/person3.jpg",gradient:"gradient-cyan"},{id:"CUST-004",firstName:"Emily",lastName:"Rodriguez",name:"Emily Rodriguez",email:"emily.r@startup.io",phone:"+1 (555) 456-7890",type:"business",status:"active",verification:"verified",totalSpent:34560,transactions:89,joinedDate:"2024-02-05",lastActivity:"5 hours ago",country:"United States",avatar:"assets/images/person4.jpg",gradient:"gradient-purple"},{id:"CUST-005",firstName:"David",lastName:"Williams",name:"David Williams",email:"dwilliams@mail.com",phone:"+1 (555) 567-8901",type:"individual",status:"inactive",verification:"verified",totalSpent:8450,transactions:23,joinedDate:"2023-09-18",lastActivity:"2 weeks ago",country:"Australia",avatar:"assets/images/person5.jpg",gradient:"gradient-orange"},{id:"CUST-006",firstName:"Lisa",lastName:"Anderson",name:"Lisa Anderson",email:"lisa.a@enterprise.com",phone:"+1 (555) 678-9012",type:"vip",status:"active",verification:"verified",totalSpent:92340,transactions:312,joinedDate:"2023-07-01",lastActivity:"30 min ago",country:"Germany",avatar:"assets/images/person6.jpg",gradient:"gradient-danger"},{id:"CUST-007",firstName:"James",lastName:"Taylor",name:"James Taylor",email:"jtaylor@example.org",phone:"+1 (555) 789-0123",type:"individual",status:"pending",verification:"unverified",totalSpent:0,transactions:0,joinedDate:"2025-10-30",lastActivity:"Just now",country:"United States",avatar:"assets/images/person7.jpg",gradient:"gradient-warning"},{id:"CUST-008",firstName:"Maria",lastName:"Garcia",name:"Maria Garcia",email:"mgarcia@business.co",phone:"+1 (555) 890-1234",type:"business",status:"active",verification:"verified",totalSpent:56780,transactions:167,joinedDate:"2024-04-12",lastActivity:"1 hour ago",country:"France",avatar:"assets/images/person8.jpg",gradient:"gradient-secondary"},{id:"CUST-009",firstName:"Robert",lastName:"Brown",name:"Robert Brown",email:"rbrown@email.net",phone:"+1 (555) 901-2345",type:"individual",status:"active",verification:"verified",totalSpent:23450,transactions:67,joinedDate:"2024-05-20",lastActivity:"6 hours ago",country:"Canada",avatar:"assets/images/person9.jpg",gradient:"gradient-cyan"},{id:"CUST-010",firstName:"Jennifer",lastName:"Martinez",name:"Jennifer Martinez",email:"jmartinez@corp.com",phone:"+1 (555) 012-3456",type:"vip",status:"active",verification:"verified",totalSpent:67890,transactions:198,joinedDate:"2023-12-08",lastActivity:"4 hours ago",country:"United Kingdom",avatar:"assets/images/person10.jpg",gradient:"gradient-purple"},{id:"CUST-011",firstName:"Thomas",lastName:"Lee",name:"Thomas Lee",email:"tlee@company.io",phone:"+1 (555) 123-4568",type:"business",status:"active",verification:"verified",totalSpent:41230,transactions:134,joinedDate:"2024-01-28",lastActivity:"8 hours ago",country:"Australia",avatar:"assets/images/person11.jpg",gradient:"gradient-success"},{id:"CUST-012",firstName:"Patricia",lastName:"White",name:"Patricia White",email:"pwhite@mail.com",phone:"+1 (555) 234-5679",type:"individual",status:"inactive",verification:"verified",totalSpent:5670,transactions:18,joinedDate:"2023-08-15",lastActivity:"1 month ago",country:"United States",avatar:"assets/images/person12.jpg",gradient:"gradient-orange"}];let currentTab="all",searchQuery="",currentFilters={status:["active","inactive","pending"],type:["individual","business","vip"],verification:["verified","unverified"]},selectedCustomers=new Set;function renderCustomers(){const e=document.getElementById("customers-container");let t=customersData.filter(e=>{if(!currentFilters.status.includes(e.status))return!1;if(!currentFilters.type.includes(e.type))return!1;if(!currentFilters.verification.includes(e.verification))return!1;if(searchQuery){const t=searchQuery.toLowerCase();return e.name.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.id.toLowerCase().includes(t)}return!0});"active"===currentTab?t=t.filter(e=>"active"===e.status):"inactive"===currentTab?t=t.filter(e=>"inactive"===e.status):"vip"===currentTab&&(t=t.filter(e=>"vip"===e.type)),e.innerHTML=t.map(e=>{const t="active"===e.status?"badge-success":"pending"===e.status?"badge-warning":"badge-danger",a="vip"===e.type?"badge-purple":"business"===e.type?"badge-info":"badge-modern";return`\n            <tr class="hover:bg-bg transition-colors border-b border-border last:border-0">\n                        <td class="p-4 sm:px-6 whitespace-nowrap">\n                            <div class="checkbox-custom ${selectedCustomers.has(e.id)?"checked":""}" onclick="toggleCustomerSelect('${e.id}')"></div>\n                        </td>\n                        <td class="p-4 sm:px-6 whitespace-nowrap">\n                            <div class="flex items-center gap-3">\n                                <div class="member-avatar shrink-0">\n                                    ${e.avatar.includes("/")?`<img src="${e.avatar}" alt="${e.name}" class="w-full h-full object-cover">`:`<div class="w-full h-full flex items-center justify-center text-sm font-bold">${e.avatar}</div>`}\n                                </div>\n                                <div>\n                                    <p class="font-bold text-text cursor-pointer hover:text-primary transition-colors" onclick="openCustomerDetails('${e.id}')">${e.name}</p>\n                                    <p class="text-xs text-muted">${e.id}</p>\n                                </div>\n                            </div>\n                        </td>\n                        <td class="p-4 sm:px-6 whitespace-nowrap">\n                            <p class="text-sm text-text">${e.email}</p>\n                        </td>\n                        <td class="p-4 sm:px-6 whitespace-nowrap">\n                            <span class="badge-modern ${a}">${e.type.charAt(0).toUpperCase()+e.type.slice(1)}</span>\n                        </td>\n                        <td class="p-4 sm:px-6 whitespace-nowrap">\n                            <span class="badge-modern ${t}">${e.status.charAt(0).toUpperCase()+e.status.slice(1)}</span>\n                        </td>\n                        <td class="p-4 sm:px-6 whitespace-nowrap">\n                            <div>\n                                <p class="font-bold text-text">$${e.totalSpent.toLocaleString("en-US",{minimumFractionDigits:2})}</p>\n                                <p class="text-xs text-muted">${e.transactions} transactions</p>\n                            </div>\n                        </td>\n                        <td class="p-4 sm:px-6 whitespace-nowrap">\n                            <p class="text-sm text-text">${formatDate(e.joinedDate)}</p>\n                        </td>\n                        <td class="p-4 sm:px-6 text-right whitespace-nowrap">\n                            <button class="btn-icon" onclick="openCustomerDetails('${e.id}')">\n                                <i data-lucide="more-vertical" class="w-5 h-5"></i>\n                            </button>\n                        </td>\n                    </tr>\n            `}).join(""),document.getElementById("showing-count1").textContent=t.length,document.getElementById("showing-count2").textContent=t.length,document.getElementById("total-count1").textContent=customersData.length,document.getElementById("total-count2").textContent=customersData.length,lucide.createIcons()}function formatDate(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function switchTabCustomerlist(e){currentTab=e,document.querySelectorAll(".tab-btn[data-tab]").forEach(e=>e.classList.remove("active"));const t=document.querySelector(`.tab-btn[data-tab="${e}"]`);t&&t.classList.add("active"),updateMobileDropdownCustomerlist(e),renderCustomers()}document.querySelectorAll(".tab-btn[data-tab]").forEach(e=>{e.addEventListener("click",()=>{switchTabCustomerlist(e.dataset.tab)})});const tabDropdownBtnCustomerlist=document.getElementById("tab-dropdown-btn-customerlist"),tabDropdownMobileCustomerlist=document.getElementById("tab-dropdown-mobile-customerlist");if(tabDropdownBtnCustomerlist&&tabDropdownMobileCustomerlist){tabDropdownBtnCustomerlist.addEventListener("click",e=>{e.stopPropagation(),tabDropdownMobileCustomerlist.classList.toggle("open")}),document.addEventListener("click",e=>{tabDropdownMobileCustomerlist.contains(e.target)||tabDropdownMobileCustomerlist.classList.remove("open")});const e=document.querySelectorAll(".tab-dropdown-item-customerlist[data-tab]");e.forEach(t=>{t.addEventListener("click",a=>{a.stopPropagation();const n=t.dataset.tab;e.forEach(e=>e.classList.remove("active")),t.classList.add("active");const s=document.getElementById("tab-dropdown-text-customerlist");if(s){const e=t.querySelector("span:first-of-type")?.textContent||t.textContent.trim();s.textContent=e}tabDropdownMobileCustomerlist.classList.remove("open"),switchTabCustomerlist(n),lucide.createIcons()})})}function updateMobileDropdownCustomerlist(e){const t=document.getElementById("tab-dropdown-text-customerlist");document.querySelectorAll(".tab-dropdown-item-customerlist[data-tab]").forEach(a=>{if(a.dataset.tab===e){if(a.classList.add("active"),t){const e=a.querySelector("span:first-of-type")?.textContent||a.textContent.trim();t.textContent=e}}else a.classList.remove("active")})}function toggleFilter(e,t,a){const n=e.querySelector(".filter-checkbox");n.classList.toggle("checked"),n.classList.contains("checked")?currentFilters[t].includes(a)||currentFilters[t].push(a):currentFilters[t]=currentFilters[t].filter(e=>e!==a),updateFilterCount()}function updateFilterCount(){const e=3-currentFilters.status.length+(3-currentFilters.type.length)+(2-currentFilters.verification.length),t=document.getElementById("filter-count");e>0?(t.textContent=e,t.style.display="inline-flex"):t.style.display="none"}function clearFilters(){currentFilters={status:["active","inactive","pending"],type:["individual","business","vip"],verification:["verified","unverified"]},document.querySelectorAll(".filter-checkbox").forEach(e=>{e.classList.add("checked")}),updateFilterCount(),renderCustomers()}function applyFilters(){document.getElementById("filter-menu").classList.remove("open"),renderCustomers()}function convertToCSV(e){if(0===e.length)return"";const t=e.map(e=>[e.id,e.name,e.email,e.phone,e.type,e.status,e.totalSpent,e.transactions,e.joinedDate,e.country].join(","));return[["ID","Name","Email","Phone","Type","Status","Total Spent","Transactions","Joined Date","Country"].join(","),...t].join("\n")}function downloadCSV(e,t){const a=new Blob([e],{type:"text/csv"}),n=window.URL.createObjectURL(a),s=document.createElement("a");s.href=n,s.download=t,s.click(),window.URL.revokeObjectURL(n)}function toggleCustomerSelect(e){selectedCustomers.has(e)?selectedCustomers.delete(e):selectedCustomers.add(e),renderCustomers(),updateSelectAllCheckbox()}function toggleSelectAll(){const e=document.getElementById("select-all");e.classList.contains("checked")?(selectedCustomers.clear(),e.classList.remove("checked")):(customersData.forEach(e=>selectedCustomers.add(e.id)),e.classList.add("checked")),renderCustomers()}function updateSelectAllCheckbox(){const e=document.getElementById("select-all");selectedCustomers.size===customersData.length?e.classList.add("checked"):e.classList.remove("checked")}function openModal(e){document.getElementById(e).classList.add("open"),document.body.style.overflow="hidden"}function closeModal(e){document.getElementById(e).classList.remove("open"),document.body.style.overflow=""}function openCustomerDetails(e){const t=customersData.find(t=>t.id===e);t&&(document.getElementById("modal-customer-name").textContent=t.name,document.getElementById("modal-customer-email").textContent=t.email,openModal("customer-details-modal"))}function addCustomer(){closeModal("add-customer-modal")}document.getElementById("customer-search")&&document.getElementById("customer-search").addEventListener("input",e=>{searchQuery=e.target.value,renderCustomers()}),document.getElementById("filter-btn-customerlist").addEventListener("click",()=>{document.getElementById("filter-menu").classList.toggle("open")}),document.addEventListener("click",e=>{const t=document.getElementById("filter-btn-customerlist"),a=document.getElementById("filter-menu");t.contains(e.target)||a.contains(e.target)||a.classList.remove("open")}),document.getElementById("export-customers")&&document.getElementById("export-customers").addEventListener("click",()=>{downloadCSV(convertToCSV(customersData),"customers-export.csv")}),document.querySelectorAll(".modal").forEach(e=>{e.addEventListener("click",t=>{t.target===e&&(e.classList.remove("open"),document.body.style.overflow="")})}),document.addEventListener("DOMContentLoaded",()=>{renderCustomers(),lucide.createIcons()});