const billingsData=[{id:"BIL-2024-001",customer:"Acme Corporation",email:"contact@acmecorp.com",amount:2500,currency:"USD",frequency:"monthly",status:"active",nextDue:"2024-12-01",gradient:"gradient-primary",avatar:"assets/images/company1.png"},{id:"BIL-2024-002",customer:"TechStart Inc",email:"billing@techstart.io",amount:5e3,currency:"USD",frequency:"monthly",status:"paid",nextDue:"2024-12-15",gradient:"gradient-success",avatar:"assets/images/company2.png"},{id:"BIL-2024-003",customer:"Global Solutions",email:"finance@globalsol.com",amount:1250,currency:"EUR",frequency:"quarterly",status:"pending",nextDue:"2024-11-20",gradient:"gradient-warning",avatar:"assets/images/company3.png"},{id:"BIL-2024-004",customer:"Digital Ventures",email:"accounts@gmail.com",amount:3750,currency:"USD",frequency:"monthly",status:"active",nextDue:"2024-12-05",gradient:"gradient-cyan",avatar:"assets/images/company4.jpg"},{id:"BIL-2024-005",customer:"Innovation Labs",email:"billing@innovationlabs.io",amount:8500,currency:"USD",frequency:"quarterly",status:"overdue",nextDue:"2024-10-28",gradient:"gradient-danger",avatar:"assets/images/company5.png"},{id:"BIL-2024-006",customer:"CloudTech Systems",email:"finance@cloudtech.com",amount:4200,currency:"GBP",frequency:"monthly",status:"active",nextDue:"2024-12-10",gradient:"gradient-purple",avatar:"assets/images/company6.webp"},{id:"BIL-2024-007",customer:"DataFlow Solutions",email:"billing@dataflow.net",amount:12e3,currency:"USD",frequency:"annually",status:"paid",nextDue:"2025-01-15",gradient:"gradient-success",avatar:"assets/images/company1.png"},{id:"BIL-2024-008",customer:"SmartBiz Inc",email:"accounts@smartbiz.com",amount:1850,currency:"USD",frequency:"monthly",status:"pending",nextDue:"2024-11-25",gradient:"gradient-warning",avatar:"assets/images/company2.png"},{id:"BIL-2024-009",customer:"NextGen Enterprises",email:"finance@nextgen.io",amount:6750,currency:"EUR",frequency:"quarterly",status:"active",nextDue:"2024-12-20",gradient:"gradient-primary",avatar:"assets/images/company3.png"},{id:"BIL-2024-010",customer:"FutureTech Corp",email:"billing@futuretech.com",amount:3300,currency:"USD",frequency:"monthly",status:"cancelled",nextDue:"2024-11-30",gradient:"gradient-danger",avatar:"assets/images/company4.jpg"},{id:"BIL-2024-011",customer:"Alpha Industries",email:"accounts@yahoo.com",amount:9500,currency:"USD",frequency:"annually",status:"active",nextDue:"2025-02-01",gradient:"gradient-cyan",avatar:"assets/images/company5.png"},{id:"BIL-2024-012",customer:"Beta Consulting",email:"finance@gmail.com",amount:2100,currency:"GBP",frequency:"monthly",status:"paid",nextDue:"2024-12-08",gradient:"gradient-success",avatar:"assets/images/company6.webp"},{id:"BIL-2024-013",customer:"Gamma Solutions",email:"billing@gammasol.io",amount:4800,currency:"USD",frequency:"quarterly",status:"overdue",nextDue:"2024-10-20",gradient:"gradient-danger",avatar:"assets/images/company1.png"},{id:"BIL-2024-014",customer:"Delta Networks",email:"accounts@deltanet.com",amount:5500,currency:"EUR",frequency:"monthly",status:"active",nextDue:"2024-12-12",gradient:"gradient-purple",avatar:"assets/images/company2.png"},{id:"BIL-2024-015",customer:"Epsilon Technologies",email:"finance@epsilontech.io",amount:7200,currency:"USD",frequency:"one-time",status:"pending",nextDue:"2024-11-18",gradient:"gradient-warning",avatar:"assets/images/company3.png"}];let currentTab="all",searchQuery="",currentFilters={status:["active","paid","pending","overdue","cancelled"],frequency:["monthly","quarterly","annually","one-time"]};function renderBillings(){const e=document.getElementById("billing-table-body"),t=document.querySelector(".table-content");let n=billingsData.filter(e=>{if(!currentFilters.status.includes(e.status))return!1;if(!currentFilters.frequency.includes(e.frequency))return!1;if(searchQuery){const t=searchQuery.toLowerCase();return e.customer.toLowerCase().includes(t)||e.id.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)}return!0});"recurring"===currentTab?n=n.filter(e=>"one-time"!==e.frequency):"one-time"===currentTab?n=n.filter(e=>"one-time"===e.frequency):"overdue"===currentTab&&(n=n.filter(e=>"overdue"===e.status)),e.innerHTML=n.map(e=>{const t={active:"badge-success",paid:"badge-info",pending:"badge-warning",overdue:"badge-danger",cancelled:"badge-danger"}[e.status],n=e.status.charAt(0).toUpperCase()+e.status.slice(1),a=e.frequency.charAt(0).toUpperCase()+e.frequency.slice(1),i=new Date(e.nextDue).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`\n                    <tr onclick="viewBillingDetails('${e.id}')">\n                        <td class="whitespace-nowrap">\n                            <div class="customer-cell">\n                                <div class="customer-avatar">\n                                <img src="${e.avatar}" alt="avater" class="w-full h-full object-cover rounded-full">\n                                </div>\n                                <div class="customer-info">\n                                    <div class="customer-name">${e.customer}</div>\n                                    <div class="customer-email">${e.email}</div>\n                                </div>\n                            </div>\n                        </td>\n                        <td class="whitespace-nowrap">\n                            <div style="font-weight: 600; color: var(--text);">${e.id}</div>\n                        </td>\n                        <td class="whitespace-nowrap">\n                            <div class="amount-cell">${e.currency} ${e.amount.toLocaleString()}</div>\n                        </td>\n                        <td class="whitespace-nowrap">\n                            <div style="font-weight: 500; color: var(--text);">${a}</div>\n                        </td>\n                        <td class="whitespace-nowrap">\n                            <span class="badge-modern ${t}">${n}</span>\n                        </td>\n                        <td class="whitespace-nowrap">\n                            <div style="font-weight: 500; color: var(--muted);">${i}</div>\n                        </td>\n                        <td class="whitespace-nowrap">\n                            <div class="action-menu">\n                                <button class="action-btn" onclick="event.stopPropagation(); viewBillingDetails('${e.id}')">\n                                    <i data-lucide="more-vertical"></i>\n                                </button>\n                            </div>\n                        </td>\n                    </tr>\n                `}).join("");const a=t.querySelector(".billing-cards-mobile");a&&a.remove();const i=document.createElement("div");i.className="billing-cards-mobile",i.innerHTML=n.map(e=>{const t={active:"badge-success",paid:"badge-info",pending:"badge-warning",overdue:"badge-danger",cancelled:"badge-danger"}[e.status],n=e.status.charAt(0).toUpperCase()+e.status.slice(1),a=e.frequency.charAt(0).toUpperCase()+e.frequency.slice(1),i=new Date(e.nextDue).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`\n                    <div class="billing-card-mobile" onclick="viewBillingDetails('${e.id}')">\n                        <div class="billing-card-header">\n                            <div class="customer-avatar rounded-full! relative overflow-hidden">\n                              <img src="${e.avatar}" alt="${e.customer}" class="absolute h-full w-full object-cover">\n                            </div>\n                            <div class="customer-info" style="flex: 1;">\n                                <div class="customer-name">${e.customer}</div>\n                                <div class="customer-email">${e.email}</div>\n                            </div>\n                        </div>\n                        <div class="billing-card-body">\n                            <div class="billing-card-row">\n                                <span class="billing-card-label">Billing ID</span>\n                                <span class="billing-card-value">${e.id}</span>\n                            </div>\n                            <div class="billing-card-row">\n                                <span class="billing-card-label">Amount</span>\n                                <span class="billing-card-value" style="color: var(--primary); font-size: 16px;">${e.currency} ${e.amount.toLocaleString()}</span>\n                            </div>\n                            <div class="billing-card-row">\n                                <span class="billing-card-label">Frequency</span>\n                                <span class="billing-card-value">${a}</span>\n                            </div>\n                            <div class="billing-card-row">\n                                <span class="billing-card-label">Status</span>\n                                <span class="badge-modern ${t}">${n}</span>\n                            </div>\n                            <div class="billing-card-row">\n                                <span class="billing-card-label">Next Due</span>\n                                <span class="billing-card-value">${i}</span>\n                            </div>\n                        </div>\n                    </div>\n                `}).join(""),t.appendChild(i),document.getElementById("showing-count1").textContent=n.length,document.getElementById("showing-count2").textContent=n.length,document.getElementById("total-count1").textContent=billingsData.length,document.getElementById("total-count2").textContent=billingsData.length,lucide.createIcons()}function switchTabBilling(e){currentTab=e,document.querySelectorAll(".tab-btn-billing[data-tab]").forEach(e=>e.classList.remove("active"));const t=document.querySelector(`.tab-btn-billing[data-tab="${e}"]`);t&&t.classList.add("active"),updateMobileDropdownBilling(e),renderBillings()}document.getElementById("menu-toggle")&&document.getElementById("menu-toggle").addEventListener("click",()=>{document.getElementById("sidebar")&&document.getElementById("sidebar").classList.toggle("open")}),document.querySelectorAll(".tab-btn-billing[data-tab]").forEach(e=>{e.addEventListener("click",()=>{switchTabBilling(e.dataset.tab)})});const tabDropdownBtnBilling=document.getElementById("tab-dropdown-btn-billing"),tabDropdownMobileBilling=document.getElementById("tab-dropdown-mobile-billing");if(tabDropdownBtnBilling&&tabDropdownMobileBilling){tabDropdownBtnBilling.addEventListener("click",e=>{e.stopPropagation(),tabDropdownMobileBilling.classList.toggle("open")}),document.addEventListener("click",e=>{tabDropdownMobileBilling.contains(e.target)||tabDropdownMobileBilling.classList.remove("open")});const e=document.querySelectorAll(".tab-dropdown-item-billing[data-tab]");e.forEach(t=>{t.addEventListener("click",n=>{n.stopPropagation();const a=t.dataset.tab;e.forEach(e=>e.classList.remove("active")),t.classList.add("active");const i=document.getElementById("tab-dropdown-text-billing");i&&(i.textContent=t.textContent.trim()),tabDropdownMobileBilling.classList.remove("open"),switchTabBilling(a),lucide.createIcons()})})}function updateMobileDropdownBilling(e){const t=document.getElementById("tab-dropdown-text-billing");document.querySelectorAll(".tab-dropdown-item-billing[data-tab]").forEach(n=>{n.dataset.tab===e?(n.classList.add("active"),t&&(t.textContent=n.textContent.trim())):n.classList.remove("active")})}function initFilterDropdowns(){const e=document.getElementById("status-filter"),t=document.getElementById("frequency-filter");[e,t].forEach(n=>{n.querySelector(".filter-btn-billing").addEventListener("click",a=>{a.stopPropagation(),n.classList.toggle("open"),[e,t].forEach(e=>{e!==n&&e.classList.remove("open")})})}),document.addEventListener("click",()=>{[e,t].forEach(e=>e.classList.remove("open"))})}function convertToCSV(e){if(0===e.length)return"";const t=e.map(e=>[e.id,e.customer,e.email,e.amount,e.currency,e.frequency,e.status,e.nextDue].join(","));return[["ID","Customer","Email","Amount","Currency","Frequency","Status","Next Due"].join(","),...t].join("\n")}function downloadCSV(e,t){const n=new Blob([e],{type:"text/csv"}),a=window.URL.createObjectURL(n),i=document.createElement("a");i.href=a,i.download=t,i.click(),window.URL.revokeObjectURL(a)}function openModal(e){document.getElementById(e).classList.add("open"),document.body.style.overflow="hidden"}function closeModal(e){document.getElementById(e).classList.remove("open"),document.body.style.overflow=""}function viewBillingDetails(e){openModal("view-billing-modal")}function createBilling(){closeModal("create-billing-modal")}function showActionMenu(e){}function initCustomDropdowns(){const e=document.querySelectorAll(".custom-dropdown");e.forEach(t=>{const n=t.querySelector(".custom-dropdown-btn"),a=t.querySelectorAll(".custom-dropdown-item"),i=t.querySelector(".custom-dropdown-btn span"),c=t.querySelector('input[type="hidden"]');n&&(n.addEventListener("click",n=>{n.stopPropagation(),e.forEach(e=>{e!==t&&e.classList.remove("open")}),t.classList.toggle("open")}),a.forEach(e=>{e.addEventListener("click",n=>{n.stopPropagation();const s=e.dataset.value,l=e.textContent.trim();a.forEach(e=>e.classList.remove("active")),e.classList.add("active"),i&&(i.textContent=l),c&&(c.value=s),t.classList.remove("open"),lucide.createIcons()})}))}),document.addEventListener("click",t=>{t.target.closest(".custom-dropdown")||e.forEach(e=>e.classList.remove("open"))})}document.getElementById("billing-search")&&document.getElementById("billing-search").addEventListener("input",e=>{searchQuery=e.target.value,renderBillings()}),document.querySelectorAll(".filter-checkbox-billing").forEach(e=>{e.addEventListener("change",e=>{const t=e.target.dataset.filter;e.target.checked?["active","paid","pending","overdue","cancelled"].includes(t)?currentFilters.status.includes(t)||currentFilters.status.push(t):["monthly","quarterly","annually","one-time"].includes(t)&&(currentFilters.frequency.includes(t)||currentFilters.frequency.push(t)):["active","paid","pending","overdue","cancelled"].includes(t)?currentFilters.status=currentFilters.status.filter(e=>e!==t):["monthly","quarterly","annually","one-time"].includes(t)&&(currentFilters.frequency=currentFilters.frequency.filter(e=>e!==t)),renderBillings()})}),document.getElementById("export-billings")&&document.getElementById("export-billings").addEventListener("click",()=>{downloadCSV(convertToCSV(billingsData),"billings-export.csv")}),document.querySelectorAll(".modal").forEach(e=>{e.addEventListener("click",t=>{t.target===e&&(e.classList.remove("open"),document.body.style.overflow="")})}),document.addEventListener("DOMContentLoaded",()=>{initFilterDropdowns(),initCustomDropdowns(),renderBillings(),lucide.createIcons()});