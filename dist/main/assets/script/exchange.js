let currentFromCurrency={code:"USD",flag:"./assets/images/usflag.png",name:"US Dollar"},currentToCurrency={code:"EUR",flag:"./assets/images/euro.png",name:"Euro"},currentRate=.9205;const exchangeRates={"USD-EUR":.9205,"USD-GBP":.7892,"USD-JPY":149.82,"USD-CAD":1.3542,"USD-AUD":1.5234,"USD-CHF":.8897,"EUR-USD":1.0864,"EUR-GBP":.8578,"EUR-JPY":162.76,"GBP-USD":1.2671,"GBP-EUR":1.1659,"JPY-USD":.0067,"CAD-USD":.7385,"AUD-USD":.6565,"CHF-USD":1.124};let exchangesData=[{id:"EX-2024-001",fromCurrency:"USD",toCurrency:"EUR",fromAmount:1e3,toAmount:920.5,rate:.9205,status:"completed",date:"2024-10-31",time:"10:30 AM",fee:2.5,fromFlag:"./assets/images/usflag.png",toFlag:"./assets/images/euro.png"},{id:"EX-2024-002",fromCurrency:"EUR",toCurrency:"GBP",fromAmount:500,toAmount:428.9,rate:.8578,status:"completed",date:"2024-10-31",time:"09:15 AM",fee:1.5,fromFlag:"./assets/images/euro.png",toFlag:"./assets/images/british.png"},{id:"EX-2024-003",fromCurrency:"USD",toCurrency:"JPY",fromAmount:2e3,toAmount:299640,rate:149.82,status:"pending",date:"2024-10-31",time:"08:45 AM",fee:5,fromFlag:"./assets/images/usflag.png",toFlag:"./assets/images/japan.png"},{id:"EX-2024-004",fromCurrency:"GBP",toCurrency:"USD",fromAmount:750,toAmount:950.32,rate:1.2671,status:"completed",date:"2024-10-30",time:"04:20 PM",fee:2,fromFlag:"./assets/images/british.png",toFlag:"./assets/images/usflag.png"},{id:"EX-2024-005",fromCurrency:"USD",toCurrency:"CAD",fromAmount:1500,toAmount:2031.3,rate:1.3542,status:"completed",date:"2024-10-30",time:"02:10 PM",fee:3.5,fromFlag:"./assets/images/usflag.png",toFlag:"./assets/images/canadian.png"},{id:"EX-2024-006",fromCurrency:"EUR",toCurrency:"USD",fromAmount:800,toAmount:869.12,rate:1.0864,status:"failed",date:"2024-10-30",time:"11:30 AM",fee:0,fromFlag:"./assets/images/euro.png",toFlag:"./assets/images/usflag.png"},{id:"EX-2024-007",fromCurrency:"USD",toCurrency:"AUD",fromAmount:3e3,toAmount:4570.2,rate:1.5234,status:"completed",date:"2024-10-29",time:"03:45 PM",fee:7.5,fromFlag:"./assets/images/usflag.png",toFlag:"./assets/images/australian.png"},{id:"EX-2024-008",fromCurrency:"USD",toCurrency:"CHF",fromAmount:1200,toAmount:1067.64,rate:.8897,status:"completed",date:"2024-10-29",time:"01:20 PM",fee:3,fromFlag:"./assets/images/usflag.png",toFlag:"./assets/images/swissFranc.png"}],currentTab="all",searchQuery="",currentFilters={status:["completed","pending","failed"],currency:["USD","EUR","GBP","JPY"]};function toggleSidebar(){document.getElementById("sidebar").classList.toggle("open")}function toggleSidebarCollapse(){document.getElementById("sidebar").classList.toggle("sidebar-collapsed")}function toggleSubmenu(e){const t=document.getElementById(e),n=document.getElementById(e.replace("-submenu","-icon"));t.classList.toggle("open"),n.classList.toggle("rotate-180")}function toggleDropdown(e){const t=document.getElementById(e);if(t.classList.contains("modal"))openModal(e),"from-currency-dropdown"===e?currencyDropDownList():"to-currency-dropdown"===e&&currencyDropDownList2();else{const e=t.querySelector(".dropdown-content");e&&e.classList.toggle("open")}}document.addEventListener("click",e=>{const t=document.getElementById("filter-dropdown-exchange"),n=document.getElementById("export-menu"),r=document.getElementById("export-btn");if(t&&!t.contains(e.target)){const e=t.querySelector(".dropdown-content");e&&e.classList.remove("open")}n&&r&&!n.contains(e.target)&&!r.contains(e.target)&&n.classList.remove("show")});const exportBtn=document.getElementById("export-btn");function openModal(e){const t=document.getElementById(e);t&&(t.classList.add("open"),document.body.style.overflow="hidden","convert-modal"===e&&(document.getElementById("review-from-amount").textContent=`${currentFromCurrency.flag} ${document.getElementById("amount-from").value}`,document.getElementById("review-to-amount").textContent=`${currentToCurrency.flag} ${document.getElementById("amount-to").value}`))}function closeModal(e){const t=document.getElementById(e);t&&(t.classList.remove("open"),document.body.style.overflow="")}function selectFromCurrency(e,t,n){currentFromCurrency={code:e,flag:t,name:n},document.querySelector("#from-currency-code").textContent=e,document.querySelector(".currency-select .currency-flag").innerHTML=`<img src="${t}" alt="${n}" class="h-full w-full object-contain">`,closeModal("from-currency-dropdown"),updateExchangeRate()}function selectToCurrency(e,t,n){currentToCurrency={code:e,flag:t,name:n},document.querySelector("#to-currency-code").textContent=e,document.querySelectorAll(".currency-select")[1].querySelector(".currency-flag").innerHTML=`<img src="${t}" alt="${n}" class="h-full w-full object-contain">`,closeModal("to-currency-dropdown"),updateExchangeRate()}function updateExchangeRate(){const e=`${currentFromCurrency.code}-${currentToCurrency.code}`;currentRate=exchangeRates[e]||1,document.getElementById("exchange-rate-display").textContent=`1 ${currentFromCurrency.code} = ${currentRate.toFixed(4)} ${currentToCurrency.code}`,calculateConversion()}function calculateConversion(){const e=((parseFloat(document.getElementById("amount-from").value)||0)*currentRate).toFixed(2);document.getElementById("amount-to").value=e,document.getElementById("total-amount").textContent=`${e} ${currentToCurrency.code}`}function exchangeSwapCurrencies(){const e=currentFromCurrency;currentFromCurrency=currentToCurrency,currentToCurrency=e,document.querySelector("#from-currency-code").textContent=currentFromCurrency.code,document.querySelectorAll(".currency-select")[0].querySelector(".currency-flag").innerHTML=`<img src="${currentFromCurrency.flag}" alt="${currentFromCurrency.name}" class="h-full w-full object-contain">`,document.querySelector("#to-currency-code").textContent=currentToCurrency.code,document.querySelectorAll(".currency-select")[1].querySelector(".currency-flag").innerHTML=`<img src="${currentToCurrency.flag}" alt="${currentToCurrency.name}" class="h-full w-full object-contain">`;const t=document.getElementById("amount-from").value,n=document.getElementById("amount-to").value;document.getElementById("amount-from").value=n,document.getElementById("amount-to").value=t,updateExchangeRate()}function swapCurrencies(){const e=currentFromCurrency;currentFromCurrency=currentToCurrency,currentToCurrency=e;const t=document.getElementById("amount-from").value,n=document.getElementById("amount-to").value;document.getElementById("amount-from").value=n,document.getElementById("amount-to").value=t,document.querySelector("#from-currency-code").textContent=currentFromCurrency.code,document.querySelectorAll(".currency-select")[0].querySelector(".currency-flag").innerHTML=`<img src="${currentFromCurrency.flag}" alt="${currentFromCurrency.name}" class="h-full w-full object-contain">`,document.querySelector("#to-currency-code").textContent=currentToCurrency.code,document.querySelectorAll(".currency-select")[1].querySelector(".currency-flag").innerHTML=`<img src="${currentToCurrency.flag}" alt="${currentToCurrency.name}" class="h-full w-full object-contain">`;const r=`${currentFromCurrency.code}-${currentToCurrency.code}`;currentRate=exchangeRates[r]||1,document.getElementById("exchange-rate-display").textContent=`1 ${currentFromCurrency.code} = ${currentRate.toFixed(4)} ${currentToCurrency.code}`;const o=document.getElementById("amount-to").value;document.getElementById("total-amount").textContent=`${o} ${currentToCurrency.code}`}exportBtn&&exportBtn.addEventListener("click",e=>{e.stopPropagation(),document.getElementById("export-menu").classList.toggle("show")});const currencyList=[{code:"USD",flag:"./assets/images/usflag.png",name:"US Dollar"},{code:"EUR",flag:"./assets/images/euro.png",name:"Euro"},{code:"GBP",flag:"./assets/images/british.png",name:"British Pound"},{code:"JPY",flag:"./assets/images/japan.png",name:"Japanese Yen"},{code:"CAD",flag:"./assets/images/canadian.png",name:"Canadian Dollar"},{code:"AUD",flag:"./assets/images/australian.png",name:"Australian Dollar"},{code:"CHF",flag:"./assets/images/swissFranc.png",name:"Swiss Franc"}];function currencyDropDownList(e){const t=document.getElementById("currencyDropDownList");if(!t)return;const n=currencyList.filter(t=>""==e||null==e||t.name.toLowerCase().includes(e.toLowerCase())||t.code.toLowerCase().includes(e.toLowerCase())?t:void 0);t.innerHTML=n.map(e=>`<div class="dropdown-item border border-border" onclick="selectFromCurrency('${e.code}','${e.flag}','${e.name}')">\n                    <div class="h-5 w-5 relative">\n                        <img src="${e.flag}" alt="${e.code} flag" class="h-full w-full object-contain absolute"/>\n                    </div>\n                    <div class="flex-1">\n                        <p class="font-semibold text-text">${e.code}</p>\n                        <p class="text-xs text-muted">${e.name}</p>\n                    </div>\n                </div>`).join("")}function currencyDropDownList2(e){const t=document.getElementById("currencyDropDownList2");if(!t)return;const n=currencyList.filter(t=>""==e||null==e||t.name.toLowerCase().includes(e.toLowerCase())||t.code.toLowerCase().includes(e.toLowerCase())?t:void 0);t.innerHTML=n.map(e=>`<div class="dropdown-item border border-border" onclick="selectToCurrency('${e.code}','${e.flag}','${e.name}')">\n                    <div class="h-5 w-5 relative">\n                        <img src="${e.flag}" alt="${e.code} flag" class="h-full w-full object-contain absolute"/>\n                    </div>\n                    <div class="flex-1">\n                        <p class="font-semibold text-text">${e.code}</p>\n                        <p class="text-xs text-muted">${e.name}</p>\n                    </div>\n                </div>`).join("")}const fromCurrencySearch=document.getElementById("from-currency-search"),toCurrencySearch=document.getElementById("to-currency-search");function selectQuickPair(e,t,n){const r={USD:{flag:"./assets/images/usflag.png",name:"US Dollar"},EUR:{flag:"./assets/images/euro.png",name:"Euro"},GBP:{flag:"./assets/images/british.png",name:"British Pound"},JPY:{flag:"./assets/images/japan.png",name:"Japanese Yen"}};currentFromCurrency={code:e,...r[e]},currentToCurrency={code:t,...r[t]},currentRate=n,document.querySelector("#from-currency-code").textContent=e,document.querySelectorAll(".currency-select")[0].querySelector(".currency-flag").innerHTML=`<img src="${r[e].flag}" alt="${r[e].name}" class="h-full w-full object-contain">`,document.querySelector("#to-currency-code").textContent=t,document.querySelectorAll(".currency-select")[1].querySelector(".currency-flag").innerHTML=`<img src="${r[t].flag}" alt="${r[t].name}" class="h-full w-full object-contain">`,document.getElementById("exchange-rate-display").textContent=`1 ${e} = ${n.toFixed(4)} ${t}`,calculateConversion(),window.scrollTo({top:0,behavior:"smooth"})}function nextConvertStep(e){document.querySelectorAll(".convert-step").forEach(e=>e.style.display="none"),document.getElementById(`convert-step-${e}`).style.display="block",document.querySelectorAll(".step-item").forEach(t=>{parseInt(t.dataset.step)<=e?t.classList.add("active"):t.classList.remove("active")});const t=document.getElementById("convert-close-btn");t&&(t.style.display=1===e?"flex":"none")}function verifyOTP(){const e=document.querySelectorAll(".otp-input");let t="";if(e.forEach(e=>t+=e.value),6===t.length){const e=document.querySelector("#convert-step-2 .btn-primary"),t=e.innerHTML;e.innerHTML='<i data-lucide="loader-2" class="w-5 h-5 animate-spin"></i> Verifying...',setTimeout(()=>{e.innerHTML=t,nextConvertStep(3),executeExchange(),document.getElementById("convert-timestamp").textContent=(new Date).toLocaleString()},1500)}else showToast("Invalid OTP","Please enter a valid 6-digit code","error")}function resetConvertModal(){setTimeout(()=>{nextConvertStep(1),document.querySelectorAll(".otp-input").forEach(e=>e.value="")},500)}function executeExchange(){const e=parseFloat(document.getElementById("amount-from").value),t=parseFloat(document.getElementById("amount-to").value),n={id:`EX-2024-${String(exchangesData.length+1).padStart(3,"0")}`,fromCurrency:currentFromCurrency.code,toCurrency:currentToCurrency.code,fromAmount:e,toAmount:t,rate:currentRate,status:"completed",date:(new Date).toISOString().split("T")[0],time:(new Date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),fee:2.5,fromFlag:currentFromCurrency.flag,toFlag:currentToCurrency.flag};exchangesData.unshift(n),renderExchanges()}function exportReport(e){showToast("Export Started",`Exporting as ${e.toUpperCase()}...`,"info"),setTimeout(()=>{showToast("Export Complete","Your report has been downloaded","success")},1500)}function renderExchanges(){const e=document.getElementById("exchanges-container");if(!e)return;let t=exchangesData.filter(e=>{if(!currentFilters.status.includes(e.status))return!1;if(!currentFilters.currency.includes(e.fromCurrency)&&!currentFilters.currency.includes(e.toCurrency))return!1;if(searchQuery){const t=searchQuery.toLowerCase();return e.id.toLowerCase().includes(t)||e.fromCurrency.toLowerCase().includes(t)||e.toCurrency.toLowerCase().includes(t)}return!0});"all"!==currentTab&&(t=t.filter(e=>e.status===currentTab)),e.innerHTML=t.map(e=>{const t="completed"===e.status?"badge-success":"pending"===e.status?"badge-warning":"badge-danger";return`\n                    <div class="exchange-row">\n                        <div class="flex items-center gap-3 flex-1">\n                            <div class="flex -space-x-2">\n                                <span class="w-12 h-12 border-2 border-panel rounded-full relative overflow-hidden"><img src="${e.fromFlag}" alt="${e.fromCurrency}" class="w-full h-full absolute"></span>\n                                <span class="w-12 h-12 rounded-full  border-2 border-panel relative overflow-hidden -translate-x-2"><img src="${e.toFlag}" alt="${e.toCurrency}" class="w-full h-full absolute"></span>\n                            </div>\n                            <div class="flex-1 min-w-0">\n                                <div class="flex sm:flex-row flex-col sm:items-center items-start gap-2 mb-1">\n                                    <p class="font-bold text-text">${e.fromCurrency} → ${e.toCurrency}</p>\n                                    <span class="badge-modern ${t}">${e.status}</span>\n                                </div>\n                                <p class="text-sm text-muted">${e.id} • ${e.date} ${e.time}</p>\n                            </div>\n                        </div>\n\n                        <div class="text-right shrink-0">\n                            <p class="text-lg font-bold text-text">${e.fromAmount.toLocaleString()} ${e.fromCurrency}</p>\n                            <p class="text-sm text-success">${e.toAmount.toLocaleString()} ${e.toCurrency}</p>\n                        </div>\n\n                        <div class="text-right shrink-0 hidden md:block">\n                            <p class="text-sm font-semibold text-text">1 ${e.fromCurrency} = ${e.rate.toFixed(4)} ${e.toCurrency}</p>\n                            <p class="text-xs text-muted">Fee: $${e.fee.toFixed(2)}</p>\n                        </div>\n\n                        <button class="btn-icon ml-4 shrink-0" onclick="showTransactionDetail('${e.id}')">\n                            <i data-lucide="more-vertical" class="w-5 h-5"></i>\n                        </button>\n                    </div>\n                `}).join("");const n=document.getElementById("showing-count"),r=document.getElementById("total-count");n&&(n.textContent=t.length),r&&(r.textContent=exchangesData.length),lucide.createIcons()}function showTransactionDetail(e){const t=document.getElementById("transaction-detail-modal");t&&(t.classList.add("open"),document.body.style.overflow="hidden")}fromCurrencySearch&&fromCurrencySearch.addEventListener("input",e=>{currencyDropDownList(e.target.value)}),toCurrencySearch&&toCurrencySearch.addEventListener("input",e=>{currencyDropDownList2(e.target.value)}),document.querySelectorAll(".otp-input").forEach((e,t)=>{e.addEventListener("input",e=>{if(1===e.target.value.length){const e=document.querySelector(`.otp-input[data-index="${t+1}"]`);e&&e.focus()}}),e.addEventListener("keydown",e=>{if("Backspace"===e.key&&0===e.target.value.length){const e=document.querySelector(`.otp-input[data-index="${t-1}"]`);e&&e.focus()}})}),document.getElementById("amount-from").addEventListener("input",calculateConversion),document.querySelectorAll("[data-tab]").forEach(e=>{e.addEventListener("click",()=>{document.querySelectorAll("[data-tab]").forEach(e=>e.classList.remove("active")),e.classList.add("active"),currentTab=e.dataset.tab,renderExchanges()})});const exchangeSearch=document.getElementById("exchange-search");function showToast(e,t,n="success"){const r=document.getElementById("toast"),o=document.getElementById("toast-title"),c=document.getElementById("toast-message");r&&o&&c&&(o.textContent=e,c.textContent=t,r.className=`toast ${n}`,r.classList.add("show"),setTimeout(()=>r.classList.remove("show"),3e3))}exchangeSearch&&exchangeSearch.addEventListener("input",e=>{searchQuery=e.target.value,renderExchanges()}),document.querySelectorAll(".filter-checkbox").forEach(e=>{e.addEventListener("change",e=>{const t=e.target.dataset.filter;e.target.checked?["completed","pending","failed"].includes(t)?currentFilters.status.includes(t)||currentFilters.status.push(t):currentFilters.currency.includes(t)||currentFilters.currency.push(t):["completed","pending","failed"].includes(t)?currentFilters.status=currentFilters.status.filter(e=>e!==t):currentFilters.currency=currentFilters.currency.filter(e=>e!==t),renderExchanges()})});const tabDropdownBtnTransaction=document.getElementById("tab-dropdown-btn-transaction"),tabDropdownMobileTransaction=document.getElementById("tab-dropdown-mobile-transaction");if(tabDropdownBtnTransaction&&tabDropdownMobileTransaction){tabDropdownBtnTransaction.addEventListener("click",e=>{e.stopPropagation(),tabDropdownMobileTransaction.classList.toggle("open")}),document.addEventListener("click",e=>{tabDropdownMobileTransaction.contains(e.target)||tabDropdownMobileTransaction.classList.remove("open")});const e=document.querySelectorAll(".tab-dropdown-item-transaction[data-tab]");e.forEach(t=>{t.addEventListener("click",n=>{n.stopPropagation();const r=t.dataset.tab;e.forEach(e=>e.classList.remove("active")),t.classList.add("active");const o=document.getElementById("tab-dropdown-text-transaction");o&&(o.textContent=t.textContent.trim()),tabDropdownMobileTransaction.classList.remove("open"),switchTabTransaction(r),lucide.createIcons()})})}function updateMobileDropdownTransaction(e){const t=document.getElementById("tab-dropdown-text-transaction");document.querySelectorAll(".tab-dropdown-item-transaction[data-tab]").forEach(n=>{n.dataset.tab===e?(n.classList.add("active"),t&&(t.textContent=n.textContent.trim())):n.classList.remove("active")})}function switchTabTransaction(e){currentTab=e,currentPage=1,document.querySelectorAll(".tab-button-transaction[data-tab]").forEach(e=>e.classList.remove("active"));const t=document.querySelector(`.tab-button-transaction[data-tab="${e}"]`);t&&t.classList.add("active"),updateMobileDropdownTransaction(e),renderExchanges()}function initQuickConvertSwipe(){const e=document.querySelector(".exchange-converter");if(!e)return;let t=0,n=0,r=0,o=0,c=!1;e.addEventListener("touchstart",e=>{"INPUT"===e.target.tagName||"BUTTON"===e.target.tagName||e.target.closest(".currency-select")||e.target.closest("button")||(t=e.changedTouches[0].screenX,n=e.changedTouches[0].screenY,c=!1)},{passive:!0}),e.addEventListener("touchmove",e=>{if("INPUT"===e.target.tagName||"BUTTON"===e.target.tagName||e.target.closest(".currency-select")||e.target.closest("button"))return;const r=e.changedTouches[0].screenX,o=e.changedTouches[0].screenY,a=Math.abs(r-t),s=Math.abs(o-n);a>10&&a>s&&(c=!0)},{passive:!0}),e.addEventListener("touchend",e=>{"INPUT"===e.target.tagName||"BUTTON"===e.target.tagName||e.target.closest(".currency-select")||e.target.closest("button")||(r=e.changedTouches[0].screenX,o=e.changedTouches[0].screenY,function(){const e=r-t,a=Math.abs(o-n);if(Math.abs(e)>60&&a<80&&c){swapCurrencies();const e=document.querySelector(".swap-button");e&&(e.style.transition="transform 0.3s ease-in-out",e.style.transform="translateX(-50%) rotate(180deg)",setTimeout(()=>{e.style.transform="translateX(-50%) rotate(0deg)"},300)),showToast("Currencies Swapped","Swipe detected - currencies have been swapped","success")}}(),c=!1)},{passive:!0})}document.querySelectorAll(".tab-button-transaction[data-tab]").forEach(e=>{e.addEventListener("click",()=>{switchTabTransaction(e.dataset.tab)})}),document.addEventListener("DOMContentLoaded",()=>{renderExchanges(),calculateConversion(),initQuickConvertSwipe(),lucide.createIcons();const e=document.getElementById("notif-toggle"),t=document.getElementById("profile-toggle");document.addEventListener("click",n=>{const r=document.querySelector('input[id="notif-toggle"]')?.parentElement;e&&r&&!r.contains(n.target)&&e.checked&&(e.checked=!1);const o=document.querySelector('input[id="profile-toggle"]')?.parentElement;t&&o&&!o.contains(n.target)&&t.checked&&(t.checked=!1)})});