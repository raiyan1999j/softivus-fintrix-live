const transactionsData=[{id:"TRX-2024-001",customer:"Sarah Johnson",type:"receive",amount:2450,currency:"USD",status:"completed",time:"2 hours ago",icon:"arrow-down-left",gradient:"gradient-success",date:"2024-10-31 14:30"},{id:"TRX-2024-002",customer:"Michael Chen",type:"send",amount:875.5,currency:"EUR",status:"completed",time:"3 hours ago",icon:"arrow-up-right",gradient:"gradient-primary",date:"2024-10-31 13:15"},{id:"TRX-2024-003",customer:"Emma Williams",type:"exchange",amount:1250,currency:"GBP",status:"pending",time:"5 hours ago",icon:"repeat",gradient:"gradient-warning",date:"2024-10-31 11:20"},{id:"TRX-2024-004",customer:"David Martinez",type:"send",amount:3200,currency:"USD",status:"completed",time:"6 hours ago",icon:"arrow-up-right",gradient:"gradient-primary",date:"2024-10-31 10:45"},{id:"TRX-2024-005",customer:"Lisa Anderson",type:"receive",amount:1890.75,currency:"CAD",status:"completed",time:"8 hours ago",icon:"arrow-down-left",gradient:"gradient-success",date:"2024-10-31 08:30"},{id:"TRX-2024-006",customer:"James Wilson",type:"send",amount:540,currency:"USD",status:"failed",time:"10 hours ago",icon:"arrow-up-right",gradient:"gradient-danger",date:"2024-10-31 06:15"},{id:"TRX-2024-007",customer:"Sophia Brown",type:"exchange",amount:2100,currency:"EUR",status:"completed",time:"12 hours ago",icon:"repeat",gradient:"gradient-cyan",date:"2024-10-31 04:20"},{id:"TRX-2024-008",customer:"Robert Taylor",type:"receive",amount:4500,currency:"USD",status:"completed",time:"14 hours ago",icon:"arrow-down-left",gradient:"gradient-success",date:"2024-10-31 02:10"},{id:"TRX-2024-009",customer:"Olivia Garcia",type:"send",amount:1675.25,currency:"GBP",status:"pending",time:"16 hours ago",icon:"arrow-up-right",gradient:"gradient-warning",date:"2024-10-30 23:45"},{id:"TRX-2024-010",customer:"William Davis",type:"exchange",amount:3850,currency:"USD",status:"completed",time:"18 hours ago",icon:"repeat",gradient:"gradient-cyan",date:"2024-10-30 21:30"},{id:"TRX-2024-011",customer:"Isabella Rodriguez",type:"receive",amount:920.5,currency:"EUR",status:"completed",time:"20 hours ago",icon:"arrow-down-left",gradient:"gradient-success",date:"2024-10-30 19:15"},{id:"TRX-2024-012",customer:"Daniel Moore",type:"send",amount:2340,currency:"CAD",status:"failed",time:"22 hours ago",icon:"arrow-up-right",gradient:"gradient-danger",date:"2024-10-30 17:00"},{id:"TRX-2024-013",customer:"Charlotte Lee",type:"receive",amount:5600,currency:"USD",status:"completed",time:"1 day ago",icon:"arrow-down-left",gradient:"gradient-success",date:"2024-10-30 14:20"},{id:"TRX-2024-014",customer:"Alexander White",type:"exchange",amount:1480.75,currency:"GBP",status:"completed",time:"1 day ago",icon:"repeat",gradient:"gradient-cyan",date:"2024-10-30 11:45"},{id:"TRX-2024-015",customer:"Amelia Harris",type:"send",amount:3120,currency:"EUR",status:"pending",time:"1 day ago",icon:"arrow-up-right",gradient:"gradient-warning",date:"2024-10-30 09:30"}];let transactionTrendsChart,currentTab="all",searchQuery="",currentFilters={status:["completed","pending","failed"],type:["send","receive","exchange"]},currentPage=1,itemsPerPage=10,viewSelection="list";function initTransactionTrendsChart(){const e=document.getElementById("transactionTrendsChart").getContext("2d"),t=e.createLinearGradient(0,0,0,300);t.addColorStop(0,"rgba(99, 102, 241, 0.3)"),t.addColorStop(1,"rgba(99, 102, 241, 0)");const n=e.createLinearGradient(0,0,0,300);n.addColorStop(0,"rgba(16, 185, 129, 0.3)"),n.addColorStop(1,"rgba(16, 185, 129, 0)"),transactionTrendsChart=new Chart(e,{type:"line",data:{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Sent",data:[1200,1900,1500,2200,2800,2400,3200,2900,3400,3800,3500,4200],borderColor:"#6366F1",backgroundColor:t,borderWidth:3,fill:!0,tension:.4,pointRadius:0,pointHoverRadius:6,pointHoverBackgroundColor:"#6366F1",pointHoverBorderColor:"#fff",pointHoverBorderWidth:2},{label:"Received",data:[800,1200,1e3,1600,2e3,1800,2400,2100,2600,2800,2500,3e3],borderColor:"#10B981",backgroundColor:n,borderWidth:3,fill:!0,tension:.4,pointRadius:0,pointHoverRadius:6,pointHoverBackgroundColor:"#10B981",pointHoverBorderColor:"#fff",pointHoverBorderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top",align:"end",labels:{usePointStyle:!0,padding:15,color:getComputedStyle(document.documentElement).getPropertyValue("--text"),font:{family:"Inter",size:12,weight:"600"}}},tooltip:{backgroundColor:getComputedStyle(document.documentElement).getPropertyValue("--panel"),titleColor:getComputedStyle(document.documentElement).getPropertyValue("--text"),bodyColor:getComputedStyle(document.documentElement).getPropertyValue("--muted"),borderColor:getComputedStyle(document.documentElement).getPropertyValue("--border"),borderWidth:1,padding:12,boxPadding:6,usePointStyle:!0,callbacks:{label:function(e){return e.dataset.label+": $"+e.parsed.y.toLocaleString()}}}},scales:{x:{grid:{display:!1},border:{display:!1},ticks:{color:getComputedStyle(document.documentElement).getPropertyValue("--muted"),font:{family:"Inter",size:11}}},y:{grid:{color:getComputedStyle(document.documentElement).getPropertyValue("--border"),drawBorder:!1},border:{display:!1},ticks:{color:getComputedStyle(document.documentElement).getPropertyValue("--muted"),font:{family:"Inter",size:11},callback:function(e){return"$"+e.toLocaleString()}}}},interaction:{intersect:!1,mode:"index"}}})}function initTransactionTypesChart(){const e=document.getElementById("transactionTypesChart").getContext("2d");new Chart(e,{type:"doughnut",data:{labels:["Payments","Transfers","Exchanges","Refunds"],datasets:[{data:[45,30,18,7],backgroundColor:["#6366F1","#10B981","#06B6D4","#F59E0B"],borderWidth:0,hoverOffset:10}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"bottom",labels:{usePointStyle:!0,padding:15,color:getComputedStyle(document.documentElement).getPropertyValue("--text"),font:{family:"Inter",size:12,weight:"600"}}},tooltip:{backgroundColor:getComputedStyle(document.documentElement).getPropertyValue("--panel"),titleColor:getComputedStyle(document.documentElement).getPropertyValue("--text"),bodyColor:getComputedStyle(document.documentElement).getPropertyValue("--muted"),borderColor:getComputedStyle(document.documentElement).getPropertyValue("--border"),borderWidth:1,padding:12,boxPadding:6,usePointStyle:!0,callbacks:{label:function(e){return e.label+": "+e.parsed+"%"}}}},cutout:"70%"}})}function renderTransactions(){const e=document.getElementById("transactions-container-transaction");let t=transactionsData.filter(e=>{if(!currentFilters.status.includes(e.status))return!1;if(!currentFilters.type.includes(e.type))return!1;if(searchQuery){const t=searchQuery.toLowerCase();return e.customer.toLowerCase().includes(t)||e.id.toLowerCase().includes(t)||e.amount.toString().includes(t)||e.currency.toLowerCase().includes(t)}return!0});"payments"===currentTab?t=t.filter(e=>"send"===e.type||"receive"===e.type):"transfers"===currentTab?t=t.filter(e=>"send"===e.type):"exchanges"===currentTab&&(t=t.filter(e=>"exchange"===e.type));const n=(currentPage-1)*itemsPerPage,a=n+itemsPerPage,r=t.slice(n,a);if("list"==viewSelection)e&&(e.innerHTML=r.map(e=>{const t="completed"===e.status?"badge-success":"pending"===e.status?"badge-warning":"badge-danger",n="receive"===e.type?"text-success":"text-text",a="receive"===e.type?"+":"-";return`\n                    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-start justify-center gap-3 sm:gap-4 py-5 px-6 bg-bg rounded-[20px] mb-3 transition-all duration-75 border border-border relative">\n\n                    <div class="flex max-sm:flex-col flex-1 w-full gap-3 sm:gap-4 flex-row xl:items-center">\n\n                        \x3c!-- Icon --\x3e\n                        <div class="w-10 h-10 sm:w-12 sm:h-12 ${e.gradient} rounded-2xl flex items-center justify-center shrink-0">\n                            <i data-lucide="${e.icon}" class="w-5 h-5 sm:w-6 sm:h-6 text-white"></i>\n                        </div>\n\n                        \x3c!-- Customer Info --\x3e\n                        <div class="flex-1 min-w-0">\n                            <div class="flex flex-col xl:flex-wrap xl:items-start items-start gap-2 mb-1">\n                                <p class="font-bold text-text truncate xl:w-full w-[80%]">${e.customer}</p>\n                                <span class="badge-modern ${t}">${e.status}</span>\n                                <p class="text-sm text-muted truncate">${e.id} • ${e.time}</p>\n                            </div>\n                        </div>\n                    </div>\n\n                    \x3c!-- Amount & Desktop More --\x3e\n                    <div class="flex items-center justify-between sm:justify-end gap-4">\n                        <div class="sm:text-right">\n                            <p class="text-lg font-bold ${n}">${a}${e.currency}${e.amount.toLocaleString()}</p>\n                            <p class="text-sm text-muted ">${e.time}</p>\n                        </div>\n\n                        \x3c!-- Desktop More button --\x3e\n                        <div class="max-sm:absolute max-sm:top-4 max-sm:right-4">\n                        <button class="btn-icon-index" \n                            onclick='openTransactionDrawer(${JSON.stringify(e).replace(/'/g,"\\'")})'>\n                            <i data-lucide="more-vertical" class="w-5 h-5"></i>\n                        </button>\n                        </div>\n                    </div>\n                </div>\n                `}).join(""));else{const t=document.createElement("div");t.className="grid grid-cols-1 md:grid-cols-2 3xl:grid-cols-4 gap-4 sm:gap-5 lg:gap-6",t.innerHTML=r.map(e=>{const t="completed"===e.status?"badge-success":"pending"===e.status?"badge-warning":"badge-danger",n="receive"===e.type?"text-success":"text-text",a="receive"===e.type?"+":"-";return`\n            <div class="transaction-card animate-slide-in cursor-pointer border border-border rounded-xl p-5" onclick="showTransactionDetail('${e.id}')">\n    \x3c!-- Header: Icon + status + dropdown --\x3e\n    <div class="flex items-start justify-between mb-4">\n        <div class="w-14 h-14 ${e.gradient} rounded-2xl flex items-center justify-center shrink-0">\n            <i data-lucide="${e.icon}" class="w-7 h-7 text-white"></i>\n        </div>\n\n        <div class="flex items-center gap-2">\n            <span class="badge-modern ${t} capitalize">${e.status}</span>\n            <button class="btn-icon" onclick="event.stopPropagation(); showTransactionDetail('${e.id}')">\n                <i data-lucide="more-vertical" class="w-5 h-5"></i>\n            </button>\n            <div class="dropdown-menu" id="actions-${e.id}">\n                <div class="dropdown-item" onclick="event.stopPropagation(); showTransactionDetail('${e.id}')">\n                    <i data-lucide="eye" class="w-4 h-4"></i>\n                    <span>View Details</span>\n                </div>\n                <div class="dropdown-item" onclick="event.stopPropagation(); copyTransactionId('${e.id}')">\n                    <i data-lucide="copy" class="w-4 h-4"></i>\n                    <span>Copy ID</span>\n                </div>\n                <div class="dropdown-item text-danger" onclick="event.stopPropagation(); deleteTransaction('${e.id}')">\n                    <i data-lucide="trash-2" class="w-4 h-4"></i>\n                    <span>Delete</span>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    \x3c!-- Customer name + ID --\x3e\n    <h3 class="text-lg font-bold text-text mb-2">${e.customer}</h3>\n    <p class="text-sm text-muted mb-4">${e.id} • ${e.time}</p>\n\n    \x3c!-- Amount + Type --\x3e\n    <div class="flex items-center gap-2 mb-4">\n        <span class="text-2xl font-bold ${n}">\n            ${a}${e.currency} ${e.amount.toLocaleString()}\n        </span>\n        <span class="badge-modern badge-primary capitalize">${e.type}</span>\n    </div>\n\n    \x3c!-- Summary stats (optional if you have more data like in link-card) --\x3e\n    <div class="grid grid-cols-2 gap-4 mb-4">\n        <div>\n            <p class="text-xs text-muted mb-1">Status</p>\n            <p class="text-lg font-bold capitalize text-text">${e.status}</p>\n        </div>\n        <div>\n            <p class="text-xs text-muted mb-1">Direction</p>\n            <p class="text-lg font-bold capitalize text-text">${e.type}</p>\n        </div>\n    </div>\n\n    \x3c!-- Footer: Created & Time --\x3e\n    <div class="pt-4">\n        <div class="flex items-center justify-between text-xs text-muted">\n            <div class="flex items-center gap-2">\n                <i data-lucide="calendar" class="w-4 h-4"></i>\n                <span>${e.date||"—"}</span>\n            </div>\n            <div class="flex items-center gap-2">\n                <i data-lucide="clock" class="w-4 h-4"></i>\n                <span>${e.time}</span>\n            </div>\n        </div>\n    </div>\n</div>\n        `}).join(""),e.innerHTML="",e.appendChild(t)}document.querySelectorAll(".showing-count").forEach(e=>{e.textContent=t.length}),document.querySelectorAll(".total-count").forEach(e=>{e.textContent=transactionsData.length}),lucide.createIcons()}function switchTabTransaction(e){currentTab=e,currentPage=1,document.querySelectorAll(".tab-button-transaction[data-tab]").forEach(e=>e.classList.remove("active"));const t=document.querySelector(`.tab-button-transaction[data-tab="${e}"]`);t&&t.classList.add("active"),updateMobileDropdownTransaction(e),renderTransactions()}document.querySelectorAll(".tab-button-transaction[data-tab]").forEach(e=>{e.addEventListener("click",()=>{switchTabTransaction(e.dataset.tab)})});const tabDropdownBtnTransaction=document.getElementById("tab-dropdown-btn-transaction"),tabDropdownMobileTransaction=document.getElementById("tab-dropdown-mobile-transaction");if(tabDropdownBtnTransaction&&tabDropdownMobileTransaction){tabDropdownBtnTransaction.addEventListener("click",e=>{e.stopPropagation(),tabDropdownMobileTransaction.classList.toggle("open")}),document.addEventListener("click",e=>{tabDropdownMobileTransaction.contains(e.target)||tabDropdownMobileTransaction.classList.remove("open")});const e=document.querySelectorAll(".tab-dropdown-item-transaction[data-tab]");e.forEach(t=>{t.addEventListener("click",n=>{n.stopPropagation();const a=t.dataset.tab;e.forEach(e=>e.classList.remove("active")),t.classList.add("active");const r=document.getElementById("tab-dropdown-text-transaction");r&&(r.textContent=t.textContent.trim()),tabDropdownMobileTransaction.classList.remove("open"),switchTabTransaction(a),lucide.createIcons()})})}function updateMobileDropdownTransaction(e){const t=document.getElementById("tab-dropdown-text-transaction");document.querySelectorAll(".tab-dropdown-item-transaction[data-tab]").forEach(n=>{n.dataset.tab===e?(n.classList.add("active"),t&&(t.textContent=n.textContent.trim())):n.classList.remove("active")})}function updateFilterCount(){const e=document.querySelectorAll(".filter-checkbox-transaction:checked").length,t=document.querySelectorAll(".filter-checkbox-transaction").length-e;document.getElementById("filter-count").textContent=t}document.getElementById("transaction-search")&&document.getElementById("transaction-search").addEventListener("input",e=>{searchQuery=e.target.value,currentPage=1,renderTransactions()}),document.getElementById("global-search")&&document.getElementById("global-search").addEventListener("input",e=>{searchQuery=e.target.value,currentPage=1,renderTransactions()}),document.getElementById("filter-button").addEventListener("click",e=>{e.stopPropagation(),document.getElementById("filter-dropdown").classList.toggle("open")}),document.addEventListener("click",e=>{const t=document.getElementById("filter-dropdown"),n=document.getElementById("filter-button");t.contains(e.target)||n.contains(e.target)||t.classList.remove("open")}),document.querySelectorAll(".filter-checkbox-transaction").forEach(e=>{e.addEventListener("change",updateFilterCount)}),document.getElementById("apply-filters").addEventListener("click",()=>{currentFilters={status:[],type:[]},document.querySelectorAll(".filter-checkbox-transaction").forEach(e=>{const t=e.dataset.filter;e.checked&&(["completed","pending","failed"].includes(t)?currentFilters.status.push(t):["send","receive","exchange"].includes(t)&&currentFilters.type.push(t))}),document.getElementById("filter-dropdown").classList.remove("open"),currentPage=1,renderTransactions()}),document.getElementById("reset-filters").addEventListener("click",()=>{document.querySelectorAll(".filter-checkbox-transaction").forEach(e=>{e.checked=!0}),currentFilters={status:["completed","pending","failed"],type:["send","receive","exchange"]},updateFilterCount(),currentPage=1,renderTransactions()}),document.getElementById("prev-page")&&document.getElementById("prev-page").addEventListener("click",()=>{currentPage>1&&(currentPage--,renderTransactions(),updatePaginationButtons())}),document.getElementById("next-page")&&document.getElementById("next-page").addEventListener("click",()=>{const e=Math.ceil(transactionsData.length/itemsPerPage);currentPage<e&&(currentPage++,renderTransactions(),updatePaginationButtons())});for(let e=1;e<=5;e++)document.getElementById(`page-${e}`)&&document.getElementById(`page-${e}`).addEventListener("click",()=>{currentPage=e,renderTransactions(),updatePaginationButtons()});function updatePaginationButtons(){for(let e=1;e<=5;e++)document.getElementById(`page-${e}`).classList.toggle("active",e===currentPage)}function updateTransactionTrendsChart(e){if(!transactionTrendsChart)return;let t,n,a;"week"===e?(t=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],n=[150,230,180,320,290,140,380],a=[100,180,150,240,210,120,300]):"month"===e?(t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=[1200,1900,1500,2200,2800,2400,3200,2900,3400,3800,3500,4200],a=[800,1200,1e3,1600,2e3,1800,2400,2100,2600,2800,2500,3e3]):"year"===e&&(t=["2019","2020","2021","2022","2023","2024","2025"],n=[15e3,21e3,18e3,28e3,32e3,38e3,45e3],a=[12e3,16e3,14e3,22e3,26e3,3e4,36e3]),transactionTrendsChart.data.labels=t,transactionTrendsChart.data.datasets[0].data=n,transactionTrendsChart.data.datasets[1].data=a,transactionTrendsChart.update()}function showTransactionDetail(e){document.getElementById("transaction-detail-modal").classList.add("open"),document.body.style.overflow="hidden"}function closeModal(e){document.getElementById(e).classList.remove("open"),document.body.style.overflow=""}document.getElementById("view-list").addEventListener("click",function(){this.classList.add("active"),document.getElementById("view-grid").classList.remove("active"),viewSelection="list",renderTransactions()}),document.getElementById("view-grid").addEventListener("click",function(){this.classList.add("active"),document.getElementById("view-list").classList.remove("active"),viewSelection="grid",renderTransactions()}),document.getElementById("chart-period-week").addEventListener("click",function(){document.querySelectorAll('[id^="chart-period-"]').forEach(e=>e.classList.remove("active")),this.classList.add("active"),updateTransactionTrendsChart("week")}),document.getElementById("chart-period-month").addEventListener("click",function(){document.querySelectorAll('[id^="chart-period-"]').forEach(e=>e.classList.remove("active")),this.classList.add("active"),updateTransactionTrendsChart("month")}),document.getElementById("chart-period-year").addEventListener("click",function(){document.querySelectorAll('[id^="chart-period-"]').forEach(e=>e.classList.remove("active")),this.classList.add("active"),updateTransactionTrendsChart("year")}),document.querySelectorAll(".modal").forEach(e=>{e.addEventListener("click",t=>{t.target===e&&(e.classList.remove("open"),document.body.style.overflow="")})}),document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{initTransactionTrendsChart(),initTransactionTypesChart()},100),renderTransactions(),updateFilterCount(),lucide.createIcons()});