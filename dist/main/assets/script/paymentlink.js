let currentTab="all",searchQuery="",currentFilters={type:["one-time","recurring","unlimited","limited"]},currentEditingLink=null;const paymentLinksData=[{id:"PL-2847",name:"Premium Subscription",description:"Monthly premium plan subscription",amount:49.99,currency:"USD",status:"active",type:"recurring",clicks:234,payments:45,revenue:2249.55,created:"2024-10-15",expiry:"2025-10-15",usageLimit:"Unlimited",usageCount:45,url:"https://pay.fintrix.co/PL-2847",gradient:"gradient-primary"},{id:"PL-2846",name:"Product Purchase",description:"One-time payment for product XYZ",amount:299,currency:"USD",status:"active",type:"one-time",clicks:189,payments:67,revenue:20033,created:"2024-10-14",expiry:"2024-12-31",usageLimit:"Unlimited",usageCount:67,url:"https://pay.fintrix.co/PL-2846",gradient:"gradient-success"},{id:"PL-2845",name:"Consultation Fee",description:"Professional consultation service",amount:150,currency:"USD",status:"active",type:"one-time",clicks:56,payments:12,revenue:1800,created:"2024-10-13",expiry:"2024-11-30",usageLimit:"50",usageCount:12,url:"https://pay.fintrix.co/PL-2845",gradient:"gradient-cyan"},{id:"PL-2844",name:"Annual Membership",description:"Yearly membership subscription",amount:499.99,currency:"USD",status:"active",type:"recurring",clicks:423,payments:89,revenue:44499.11,created:"2024-10-12",expiry:"2025-10-12",usageLimit:"Unlimited",usageCount:89,url:"https://pay.fintrix.co/PL-2844",gradient:"gradient-purple"},{id:"PL-2843",name:"Workshop Registration",description:"Online workshop registration fee",amount:79.99,currency:"USD",status:"expired",type:"one-time",clicks:145,payments:34,revenue:2719.66,created:"2024-09-20",expiry:"2024-10-20",usageLimit:"100",usageCount:34,url:"https://pay.fintrix.co/PL-2843",gradient:"gradient-warning"},{id:"PL-2842",name:"Digital Download",description:"Instant digital product download",amount:29.99,currency:"USD",status:"active",type:"one-time",clicks:678,payments:234,revenue:7017.66,created:"2024-10-10",expiry:"2025-01-10",usageLimit:"Unlimited",usageCount:234,url:"https://pay.fintrix.co/PL-2842",gradient:"gradient-orange"},{id:"PL-2841",name:"VIP Access Pass",description:"Exclusive VIP access membership",amount:199.99,currency:"USD",status:"active",type:"recurring",clicks:312,payments:56,revenue:11199.44,created:"2024-10-08",expiry:"2025-10-08",usageLimit:"Unlimited",usageCount:56,url:"https://pay.fintrix.co/PL-2841",gradient:"gradient-primary"},{id:"PL-2840",name:"Training Course",description:"Professional training course fee",amount:399,currency:"USD",status:"disabled",type:"one-time",clicks:89,payments:23,revenue:9177,created:"2024-10-05",expiry:"2024-12-05",usageLimit:"200",usageCount:23,url:"https://pay.fintrix.co/PL-2840",gradient:"gradient-danger"},{id:"PL-2839",name:"Event Ticket",description:"Special event admission ticket",amount:125,currency:"USD",status:"active",type:"limited",clicks:567,payments:178,revenue:22250,created:"2024-10-01",expiry:"2024-11-15",usageLimit:"500",usageCount:178,url:"https://pay.fintrix.co/PL-2839",gradient:"gradient-secondary"},{id:"PL-2838",name:"License Renewal",description:"Annual software license renewal",amount:899.99,currency:"USD",status:"expired",type:"one-time",clicks:45,payments:12,revenue:10799.88,created:"2024-08-15",expiry:"2024-09-15",usageLimit:"100",usageCount:12,url:"https://pay.fintrix.co/PL-2838",gradient:"gradient-warning"},{id:"PL-2837",name:"Donation",description:"Charitable donation link",amount:50,currency:"USD",status:"active",type:"unlimited",clicks:892,payments:456,revenue:22800,created:"2024-09-20",expiry:"2025-09-20",usageLimit:"Unlimited",usageCount:456,url:"https://pay.fintrix.co/PL-2837",gradient:"gradient-success"},{id:"PL-2836",name:"Beta Access",description:"Early access to beta program",amount:19.99,currency:"USD",status:"disabled",type:"limited",clicks:234,payments:67,revenue:1339.33,created:"2024-09-10",expiry:"2024-10-10",usageLimit:"1000",usageCount:67,url:"https://pay.fintrix.co/PL-2836",gradient:"gradient-danger"}];function toggleSidebar(){document.getElementById("sidebar").classList.toggle("open")}function toggleSubmenu(e){const t=document.getElementById(e),n=document.getElementById(e+"-icon");t.classList.toggle("open"),n&&(n.style.transform=t.classList.contains("open")?"rotate(180deg)":"")}function toggleDropdown(e){const t=document.getElementById(e);t.classList.toggle("open"),t.classList.contains("open")&&setTimeout(()=>{document.addEventListener("click",function e(n){t.contains(n.target)||n.target.closest('[onclick*="toggleDropdown"]')||(t.classList.remove("open"),document.removeEventListener("click",e))})},0)}function toggleSwitch(e){e.classList.toggle("active")}function renderLinks(){const e=document.getElementById("links-container");let t=paymentLinksData.filter(e=>{if("active"===currentTab&&"active"!==e.status)return!1;if("expired"===currentTab&&"expired"!==e.status)return!1;if("disabled"===currentTab&&"disabled"!==e.status)return!1;if(!currentFilters.type.includes(e.type))return!1;if(searchQuery){const t=searchQuery.toLowerCase();return e.name.toLowerCase().includes(t)||e.id.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)}return!0});e.innerHTML=t.map(e=>{const t="active"===e.status?"badge-success":"expired"===e.status?"badge-warning":"badge-danger",n=e.clicks>0?(e.payments/e.clicks*100).toFixed(1):0;return`\n                    <div class=" link-card animate-slide-in relative" onclick="viewLinkDetails('${e.id}')">\n                        <div class="flex items-start justify-between mb-4">\n                            <div class="md:size-14 size-12 state-icon ${e.gradient} rounded-2xl flex items-center justify-center shrink-0">\n                                <i data-lucide="link" class="w-7 h-7 text-white"></i>\n                            </div>\n                            <div class="flex items-center gap-2">\n                                <span class="badge-modern ${t} capitalize">${e.status}</span>\n                                <button class="btn-icon" onclick="event.stopPropagation(); toggleDropdown('actions-${e.id}')">\n                                    <i data-lucide="more-vertical" class="w-5 h-5"></i>\n                                </button>\n                                <div class="dropdown-menu absolute! top-[17%]!" id="actions-${e.id}">\n                                    <div class="dropdown-item" onclick="event.stopPropagation(); viewLinkDetails('${e.id}')">\n                                        <i data-lucide="eye" class="w-4 h-4"></i>\n                                        <span>View Details</span>\n                                    </div>\n                                    <div class="dropdown-item" onclick="event.stopPropagation(); editLink('${e.id}')">\n                                        <i data-lucide="edit" class="w-4 h-4"></i>\n                                        <span>Edit Link</span>\n                                    </div>\n                                    <div class="dropdown-item" onclick="event.stopPropagation(); copyLinkUrl('${e.url}')">\n                                        <i data-lucide="copy" class="w-4 h-4"></i>\n                                        <span>Copy URL</span>\n                                    </div>\n                                    <div class="dropdown-item" onclick="event.stopPropagation(); generateQRCode('${e.id}')">\n                                        <i data-lucide="qr-code" class="w-4 h-4"></i>\n                                        <span>QR Code</span>\n                                    </div>\n                                    <div class="dropdown-item" onclick="event.stopPropagation(); toggleLinkStatus('${e.id}')">\n                                        <i data-lucide="${"disabled"===e.status?"play":"pause"}" class="w-4 h-4"></i>\n                                        <span>${"disabled"===e.status?"Enable":"Disable"}</span>\n                                    </div>\n                                    <div class="dropdown-item text-danger" onclick="event.stopPropagation(); deleteLink('${e.id}')">\n                                        <i data-lucide="trash-2" class="w-4 h-4"></i>\n                                        <span>Delete</span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        <h3 class="text-lg font-bold text-text mb-2">${e.name}</h3>\n                        <p class="text-sm text-muted mb-4 line-clamp-2">${e.description}</p>\n\n                        <div class="flex items-center gap-2 mb-4">\n                            <span class="text-2xl font-bold text-text">${e.currency} ${e.amount.toLocaleString()}</span>\n                            <span class="badge-modern badge-primary capitalize">${e.type}</span>\n                        </div>\n\n                        <div class="grid grid-cols-3 gap-4 mb-4">\n                            <div>\n                                <p class="text-xs text-muted mb-1">Clicks</p>\n                                <p class="text-lg font-bold text-text">${e.clicks.toLocaleString()}</p>\n                            </div>\n                            <div>\n                                <p class="text-xs text-muted mb-1">Payments</p>\n                                <p class="text-lg font-bold text-success">${e.payments}</p>\n                            </div>\n                            <div>\n                                <p class="text-xs text-muted mb-1">Revenue</p>\n                                <p class="text-lg font-bold text-text">${e.currency} ${e.revenue.toLocaleString()}</p>\n                            </div>\n                        </div>\n\n                        <div class="mb-4">\n                            <div class="flex items-center justify-between mb-2">\n                                <span class="text-xs text-muted">Conversion Rate</span>\n                                <span class="text-xs font-semibold text-primary">${n}%</span>\n                            </div>\n                            <div class="progress-bar">\n                                <div class="progress-fill" style="width: ${n}%"></div>\n                            </div>\n                        </div>\n\n                        <div class="pt-4 border-t border-border">\n                            <div class="flex items-center justify-between text-xs">\n                                <div class="flex items-center gap-2 text-muted">\n                                    <i data-lucide="calendar" class="w-4 h-4"></i>\n                                    <span>${e.created}</span>\n                                </div>\n                                <div class="flex items-center gap-2 text-muted">\n                                    <i data-lucide="clock" class="w-4 h-4"></i>\n                                    <span>Expires: ${e.expiry}</span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                `}).join(""),document.getElementById("showing-count").textContent=t.length,document.getElementById("total-count").textContent=paymentLinksData.length,lucide.createIcons()}function updateFilters(){currentFilters.type=[],document.querySelectorAll(".filter-checkbox").forEach(e=>{e.classList.contains("checked")&&currentFilters.type.push(e.dataset.filter)}),renderLinks()}function convertToCSV(e){if(0===e.length)return"";const t=e.map(e=>[e.id,e.name,e.description,e.amount,e.currency,e.status,e.type,e.clicks,e.payments,e.revenue,e.created,e.expiry].join(","));return[["ID","Name","Description","Amount","Currency","Status","Type","Clicks","Payments","Revenue","Created","Expiry"].join(","),...t].join("\n")}function downloadCSV(e,t){const n=new Blob([e],{type:"text/csv"}),i=window.URL.createObjectURL(n),s=document.createElement("a");s.href=i,s.download=t,s.click(),window.URL.revokeObjectURL(i)}function viewLinkDetails(e){const t=paymentLinksData.find(t=>t.id===e);if(!t)return;const n=document.getElementById("link-details-content"),i=t.clicks>0?(t.payments/t.clicks*100).toFixed(1):0,s="active"===t.status?"badge-success":"expired"===t.status?"badge-warning":"badge-danger";n.innerHTML=`\n                <div class="flex items-start gap-4">\n                    <div class="md:size-16 size-12 ${t.gradient} rounded-2xl flex items-center justify-center shrink-0">\n                        <i data-lucide="link" class="w-8 h-8 text-white"></i>\n                    </div>\n                    <div class="flex-1 min-w-0">\n                        <h3 class="text-xl font-bold text-text mb-2 wrap-break-word">${t.name}</h3>\n                        <p class="text-sm text-muted mb-3 wrap-break-word">${t.description}</p>\n                        <span class="badge-modern ${s} capitalize">${t.status}</span>\n                    </div>\n                </div>\n\n                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 p-4 sm:p-6 bg-bg rounded-xl">\n                    <div class="min-w-0">\n                        <p class="text-sm text-muted mb-1">Amount</p>\n                        <p class="text-xl sm:text-2xl font-bold text-text wrap-break-word">${t.currency} ${t.amount.toLocaleString()}</p>\n                    </div>\n                    <div class="min-w-0">\n                        <p class="text-sm text-muted mb-1">Type</p>\n                        <span class="badge-modern badge-primary capitalize">${t.type}</span>\n                    </div>\n                </div>\n\n                <div class="grid grid-cols-2 sm:grid-cols-2 gap-3 sm:gap-4">\n                    <div class="p-3 sm:p-4 bg-bg rounded-xl min-w-0">\n                        <p class="text-xs text-muted mb-2">Total Clicks</p>\n                        <p class="text-xl sm:text-2xl font-bold text-text wrap-break-word">${t.clicks.toLocaleString()}</p>\n                    </div>\n                    <div class="p-3 sm:p-4 bg-bg rounded-xl min-w-0">\n                        <p class="text-xs text-muted mb-2">Payments</p>\n                        <p class="text-xl sm:text-2xl font-bold text-success wrap-break-word">${t.payments}</p>\n                    </div>\n                    <div class="p-3 sm:p-4 bg-bg rounded-xl min-w-0">\n                        <p class="text-xs text-muted mb-2">Revenue</p>\n                        <p class="text-xl sm:text-2xl font-bold text-text wrap-break-word">${t.currency} ${t.revenue.toLocaleString()}</p>\n                    </div>\n                    <div class="p-3 sm:p-4 bg-bg rounded-xl min-w-0">\n                        <p class="text-xs text-muted mb-2">Conversion</p>\n                        <p class="text-xl sm:text-2xl font-bold text-primary wrap-break-word">${i}%</p>\n                    </div>\n                </div>\n\n                <div class="space-y-3">\n                    <div class="flex items-center justify-between p-4 bg-bg rounded-xl min-w-0">\n                        <div class="flex items-center gap-3 min-w-0 flex-1">\n                            <i data-lucide="hash" class="w-5 h-5 text-muted shrink-0"></i>\n                            <div class="min-w-0 flex-1">\n                                <p class="text-sm font-semibold text-text">Link ID</p>\n                                <p class="text-sm text-muted break-all">${t.id}</p>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="flex items-center justify-between p-4 bg-bg rounded-xl min-w-0">\n                        <div class="flex items-center gap-3 min-w-0 flex-1">\n                            <i data-lucide="calendar" class="w-5 h-5 text-muted shrink-0"></i>\n                            <div class="min-w-0 flex-1">\n                                <p class="text-sm font-semibold text-text">Created Date</p>\n                                <p class="text-sm text-muted wrap-break-word">${t.created}</p>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="flex items-center justify-between p-4 bg-bg rounded-xl min-w-0">\n                        <div class="flex items-center gap-3 min-w-0 flex-1">\n                            <i data-lucide="clock" class="w-5 h-5 text-muted shrink-0"></i>\n                            <div class="min-w-0 flex-1">\n                                <p class="text-sm font-semibold text-text">Expiry Date</p>\n                                <p class="text-sm text-muted wrap-break-word">${t.expiry}</p>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="flex items-center justify-between p-4 bg-bg rounded-xl min-w-0">\n                        <div class="flex items-center gap-3 min-w-0 flex-1">\n                            <i data-lucide="users" class="w-5 h-5 text-muted shrink-0"></i>\n                            <div class="min-w-0 flex-1">\n                                <p class="text-sm font-semibold text-text">Usage Limit</p>\n                                <p class="text-sm text-muted wrap-break-word">${t.usageCount} / ${t.usageLimit}</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="p-4 bg-bg rounded-xl min-w-0">\n                    <label class="block text-sm font-semibold text-text mb-2">Payment Link URL</label>\n                    <div class="flex flex-col sm:flex-row gap-2">\n                        <input type="text" value="${t.url}" class="input-modern flex-1 min-w-0 text-sm" readonly>\n                        <button class="btn-icon shrink-0" onclick="copyLinkUrl('${t.url}')">\n                            <i data-lucide="copy" class="w-5 h-5"></i>\n                        </button>\n                    </div>\n                </div>\n\n                <div class="flex items-center justify-center p-6 bg-bg rounded-xl overflow-hidden">\n                    <div id="qr-code-${e}" class="flex items-center justify-center"></div>\n                </div>\n\n                <div class="flex flex-col sm:flex-row gap-3">\n                    <button class="btn-secondary flex-1 justify-center py-2.5! lg:py-[14px]! w-full sm:w-auto" onclick="editLink('${t.id}')">\n                        <i data-lucide="edit" class="w-5 h-5"></i>\n                        <span>Edit Link</span>\n                    </button>\n                    <button class="btn-primary flex-1 justify-center py-2.5! lg:py-[14px]! w-full sm:w-auto" onclick="copyLinkUrl('${t.url}')">\n                        <i data-lucide="share-2" class="w-5 h-5"></i>\n                        <span>Share Link</span>\n                    </button>\n                </div>\n            `,lucide.createIcons(),setTimeout(()=>{new QRCode(document.getElementById(`qr-code-${e}`),{text:t.url,width:200,height:200,colorDark:document.documentElement.classList.contains("dark")?"#F1F5F9":"#0F172A",colorLight:document.documentElement.classList.contains("dark")?"#13151C":"#FFFFFF"})},100),openModal("link-details-modal")}function editLink(e){closeModal("link-details-modal");const t=paymentLinksData.find(t=>t.id===e);t&&(currentEditingLink=e,document.getElementById("edit-name").value=t.name,document.getElementById("edit-description").value=t.description,document.getElementById("edit-amount").value=t.amount,document.getElementById("edit-currency").value=t.currency,openModal("edit-link-modal"))}function saveEditLink(){if(!currentEditingLink)return;const e=paymentLinksData.find(e=>e.id===currentEditingLink);e&&(e.name=document.getElementById("edit-name").value,e.description=document.getElementById("edit-description").value,e.amount=parseFloat(document.getElementById("edit-amount").value),closeModal("edit-link-modal"),renderLinks())}function copyLinkUrl(e){navigator.clipboard.writeText(e)}function generateQRCode(e){viewLinkDetails(e)}function toggleLinkStatus(e){const t=paymentLinksData.find(t=>t.id===e);t&&("disabled"===t.status?t.status="active":t.status="disabled",renderLinks())}function deleteLink(e){if(confirm("Are you sure you want to delete this payment link? This action cannot be undone.")){const t=paymentLinksData.findIndex(t=>t.id===e);t>-1&&(paymentLinksData.splice(t,1),renderLinks())}}function createPaymentLink(){closeModal("create-link-modal"),setTimeout(()=>{renderLinks()},300)}function openModal(e){document.getElementById(e).classList.add("open"),document.body.style.overflow="hidden"}function closeModal(e){document.getElementById(e).classList.remove("open"),document.body.style.overflow=""}function showToast(e,t,n="success"){const i=document.getElementById("toast"),s=document.getElementById("toast-title"),a=document.getElementById("toast-message"),c=document.getElementById("toast-icon"),d=document.getElementById("toast-icon-container");s.textContent=e,a.textContent=t,"success"===n?(c.setAttribute("data-lucide","check-circle"),d.className="w-10 h-10 rounded-xl flex items-center justify-center shrink-0 gradient-success"):"error"===n?(c.setAttribute("data-lucide","alert-circle"),d.className="w-10 h-10 rounded-xl flex items-center justify-center shrink-0 gradient-danger"):"warning"===n&&(c.setAttribute("data-lucide","alert-triangle"),d.className="w-10 h-10 rounded-xl flex items-center justify-center shrink-0 gradient-warning"),i.className=`toast ${n}`,lucide.createIcons(),i.classList.add("show"),setTimeout(()=>i.classList.remove("show"),3e3)}document.addEventListener("click",e=>{e.target.classList.contains("checkbox-wrapper")&&(e.target.classList.toggle("checked"),e.target.classList.contains("filter-checkbox")&&updateFilters())}),document.querySelectorAll("[data-tab]").forEach(e=>{e.addEventListener("click",()=>{document.querySelectorAll("[data-tab]").forEach(e=>e.classList.remove("active")),e.classList.add("active"),currentTab=e.dataset.tab,renderLinks()})}),document.getElementById("link-search").addEventListener("input",e=>{searchQuery=e.target.value,renderLinks()}),document.getElementById("export-links")&&document.getElementById("export-links").addEventListener("click",()=>{downloadCSV(convertToCSV(paymentLinksData),"payment-links-export.csv")}),document.querySelectorAll(".modal").forEach(e=>{e.addEventListener("click",t=>{t.target===e&&(e.classList.remove("open"),document.body.style.overflow="")})});const tabDropdownBtnTransaction=document.getElementById("tab-dropdown-btn-transaction"),tabDropdownMobileTransaction=document.getElementById("tab-dropdown-mobile-transaction");if(tabDropdownBtnTransaction&&tabDropdownMobileTransaction){tabDropdownBtnTransaction.addEventListener("click",e=>{e.stopPropagation(),tabDropdownMobileTransaction.classList.toggle("open")}),document.addEventListener("click",e=>{tabDropdownMobileTransaction.contains(e.target)||tabDropdownMobileTransaction.classList.remove("open")});const e=document.querySelectorAll(".tab-dropdown-item-transaction[data-tab]");e.forEach(t=>{t.addEventListener("click",n=>{n.stopPropagation();const i=t.dataset.tab;e.forEach(e=>e.classList.remove("active")),t.classList.add("active");const s=document.getElementById("tab-dropdown-text-transaction");s&&(s.textContent=t.textContent.trim()),tabDropdownMobileTransaction.classList.remove("open"),switchTabTransaction(i),lucide.createIcons()})})}function updateMobileDropdownTransaction(e){const t=document.getElementById("tab-dropdown-text-transaction");document.querySelectorAll(".tab-dropdown-item-transaction[data-tab]").forEach(n=>{n.dataset.tab===e?(n.classList.add("active"),t&&(t.textContent=n.textContent.trim())):n.classList.remove("active")})}function switchTabTransaction(e){currentTab=e,currentPage=1,document.querySelectorAll(".tab-button-transaction[data-tab]").forEach(e=>e.classList.remove("active"));const t=document.querySelector(`.tab-button-transaction[data-tab="${e}"]`);t&&t.classList.add("active"),updateMobileDropdownTransaction(e)}document.querySelectorAll(".tab-button-transaction[data-tab]").forEach(e=>{e.addEventListener("click",()=>{switchTabTransaction(e.dataset.tab)})}),document.addEventListener("DOMContentLoaded",()=>{renderLinks(),lucide.createIcons()});